import*as W from"react";import Nn,{useState as it,useRef as ht,useEffect as In}from"react";import kn from"react-dom";import{ReactSketchCanvas as Ln}from"react-sketch-canvas";var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Fn(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var l=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return r[n]}})}),t}var dt={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rr;function Pn(){if(rr)return De;rr=1;var r=Nn,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function f(o,p,w){var E,_={},S=null,T=null;w!==void 0&&(S=""+w),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(T=p.ref);for(E in p)n.call(p,E)&&!u.hasOwnProperty(E)&&(_[E]=p[E]);if(o&&o.defaultProps)for(E in p=o.defaultProps,p)_[E]===void 0&&(_[E]=p[E]);return{$$typeof:e,type:o,key:S,ref:T,props:_,_owner:l.current}}return De.Fragment=t,De.jsx=f,De.jsxs=f,De}var nr;function Mn(){return nr||(nr=1,dt.exports=Pn()),dt.exports}var G=Mn(),Ve={},ir;function Dn(){if(ir)return Ve;ir=1;var r=kn;return Ve.createRoot=r.createRoot,Ve.hydrateRoot=r.hydrateRoot,Ve}var Un=Dn();const qn=Xr(Un);/**
 * @remix-run/router v1.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function st(){return st=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},st.apply(this,arguments)}var we;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(we||(we={}));const sr="popstate";function jn(r){r===void 0&&(r={});function e(n,l){let{pathname:u,search:f,hash:o}=n.location;return qt("",{pathname:u,search:f,hash:o},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(n,l){return typeof l=="string"?l:Zr(l)}return $n(e,t,null,r)}function ie(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Qr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wn(){return Math.random().toString(36).substr(2,8)}function or(r,e){return{usr:r.state,key:r.key,idx:e}}function qt(r,e,t,n){return t===void 0&&(t=null),st({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?at(e):e,{state:t,key:e&&e.key||n||Wn()})}function Zr(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function at(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function $n(r,e,t,n){n===void 0&&(n={});let{window:l=document.defaultView,v5Compat:u=!1}=n,f=l.history,o=we.Pop,p=null,w=E();w==null&&(w=0,f.replaceState(st({},f.state,{idx:w}),""));function E(){return(f.state||{idx:null}).idx}function _(){o=we.Pop;let m=E(),y=m==null?null:m-w;w=m,p&&p({action:o,location:b.location,delta:y})}function S(m,y){o=we.Push;let C=qt(b.location,m,y);w=E()+1;let I=or(C,w),x=b.createHref(C);try{f.pushState(I,"",x)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;l.location.assign(x)}u&&p&&p({action:o,location:b.location,delta:1})}function T(m,y){o=we.Replace;let C=qt(b.location,m,y);w=E();let I=or(C,w),x=b.createHref(C);f.replaceState(I,"",x),u&&p&&p({action:o,location:b.location,delta:0})}function c(m){let y=l.location.origin!=="null"?l.location.origin:l.location.href,C=typeof m=="string"?m:Zr(m);return C=C.replace(/ $/,"%20"),ie(y,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,y)}let b={get action(){return o},get location(){return r(l,f)},listen(m){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(sr,_),p=m,()=>{l.removeEventListener(sr,_),p=null}},createHref(m){return e(l,m)},createURL:c,encodeLocation(m){let y=c(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:S,replace:T,go(m){return f.go(m)}};return b}var ar;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ar||(ar={}));function Vn(r,e,t){return t===void 0&&(t="/"),Hn(r,e,t)}function Hn(r,e,t,n){let l=typeof e=="string"?at(e):e,u=rn(l.pathname||"/",t);if(u==null)return null;let f=en(r);Yn(f);let o=null;for(let p=0;o==null&&p<f.length;++p){let w=ii(u);o=ti(f[p],w)}return o}function en(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let l=(u,f,o)=>{let p={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(ie(p.relativePath.startsWith(n),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(n.length));let w=Ne([n,p.relativePath]),E=t.concat(p);u.children&&u.children.length>0&&(ie(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),en(u.children,e,E,w)),!(u.path==null&&!u.index)&&e.push({path:w,score:Zn(w,u.index),routesMeta:E})};return r.forEach((u,f)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))l(u,f);else for(let p of tn(u.path))l(u,f,p)}),e}function tn(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(n.length===0)return l?[u,""]:[u];let f=tn(n.join("/")),o=[];return o.push(...f.map(p=>p===""?u:[u,p].join("/"))),l&&o.push(...f),o.map(p=>r.startsWith("/")&&p===""?"/":p)}function Yn(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:ei(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const Kn=/^:[\w-]+$/,Gn=3,Jn=2,zn=1,Xn=10,Qn=-2,ur=r=>r==="*";function Zn(r,e){let t=r.split("/"),n=t.length;return t.some(ur)&&(n+=Qn),e&&(n+=Jn),t.filter(l=>!ur(l)).reduce((l,u)=>l+(Kn.test(u)?Gn:u===""?zn:Xn),n)}function ei(r,e){return r.length===e.length&&r.slice(0,-1).every((n,l)=>n===e[l])?r[r.length-1]-e[e.length-1]:0}function ti(r,e,t){let{routesMeta:n}=r,l={},u="/",f=[];for(let o=0;o<n.length;++o){let p=n[o],w=o===n.length-1,E=u==="/"?e:e.slice(u.length)||"/",_=ri({path:p.relativePath,caseSensitive:p.caseSensitive,end:w},E),S=p.route;if(!_)return null;Object.assign(l,_.params),f.push({params:l,pathname:Ne([u,_.pathname]),pathnameBase:si(Ne([u,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(u=Ne([u,_.pathnameBase]))}return f}function ri(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=ni(r.path,r.caseSensitive,r.end),l=e.match(t);if(!l)return null;let u=l[0],f=u.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:n.reduce((w,E,_)=>{let{paramName:S,isOptional:T}=E;if(S==="*"){let b=o[_]||"";f=u.slice(0,u.length-b.length).replace(/(.)\/+$/,"$1")}const c=o[_];return T&&!c?w[S]=void 0:w[S]=(c||"").replace(/%2F/g,"/"),w},{}),pathname:u,pathnameBase:f,pattern:r}}function ni(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,o,p)=>(n.push({paramName:o,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),n]}function ii(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qr(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function rn(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const Ne=r=>r.join("/").replace(/\/\/+/g,"/"),si=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/");function oi(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const nn=["post","put","patch","delete"];new Set(nn);const ai=["get",...nn];new Set(ai);/**
 * React Router v6.28.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ot(){return ot=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ot.apply(this,arguments)}const ui=W.createContext(null),li=W.createContext(null),sn=W.createContext(null),ut=W.createContext(null),lt=W.createContext({outlet:null,matches:[],isDataRoute:!1}),on=W.createContext(null);function Jt(){return W.useContext(ut)!=null}function ci(){return Jt()||ie(!1),W.useContext(ut).location}function fi(r,e){return hi(r,e)}function hi(r,e,t,n){Jt()||ie(!1);let{navigator:l}=W.useContext(sn),{matches:u}=W.useContext(lt),f=u[u.length-1],o=f?f.params:{};f&&f.pathname;let p=f?f.pathnameBase:"/";f&&f.route;let w=ci(),E;if(e){var _;let m=typeof e=="string"?at(e):e;p==="/"||(_=m.pathname)!=null&&_.startsWith(p)||ie(!1),E=m}else E=w;let S=E.pathname||"/",T=S;if(p!=="/"){let m=p.replace(/^\//,"").split("/");T="/"+S.replace(/^\//,"").split("/").slice(m.length).join("/")}let c=Vn(r,{pathname:T}),b=_i(c&&c.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Ne([p,l.encodeLocation?l.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?p:Ne([p,l.encodeLocation?l.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),u,t,n);return e&&b?W.createElement(ut.Provider,{value:{location:ot({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:we.Pop}},b):b}function di(){let r=Ei(),e=oi(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:l},t):null,null)}const pi=W.createElement(di,null);class gi extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(lt.Provider,{value:this.props.routeContext},W.createElement(on.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yi(r){let{routeContext:e,match:t,children:n}=r,l=W.useContext(ui);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(lt.Provider,{value:e},n)}function _i(r,e,t,n){var l;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var u;if(!t)return null;if(t.errors)r=t.matches;else if((u=n)!=null&&u.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let f=r,o=(l=t)==null?void 0:l.errors;if(o!=null){let E=f.findIndex(_=>_.route.id&&o?.[_.route.id]!==void 0);E>=0||ie(!1),f=f.slice(0,Math.min(f.length,E+1))}let p=!1,w=-1;if(t&&n&&n.v7_partialHydration)for(let E=0;E<f.length;E++){let _=f[E];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(w=E),_.route.id){let{loaderData:S,errors:T}=t,c=_.route.loader&&S[_.route.id]===void 0&&(!T||T[_.route.id]===void 0);if(_.route.lazy||c){p=!0,w>=0?f=f.slice(0,w+1):f=[f[0]];break}}}return f.reduceRight((E,_,S)=>{let T,c=!1,b=null,m=null;t&&(T=o&&_.route.id?o[_.route.id]:void 0,b=_.route.errorElement||pi,p&&(w<0&&S===0?(c=!0,m=null):w===S&&(c=!0,m=_.route.hydrateFallbackElement||null)));let y=e.concat(f.slice(0,S+1)),C=()=>{let I;return T?I=b:c?I=m:_.route.Component?I=W.createElement(_.route.Component,null):_.route.element?I=_.route.element:I=E,W.createElement(yi,{match:_,routeContext:{outlet:E,matches:y,isDataRoute:t!=null},children:I})};return t&&(_.route.ErrorBoundary||_.route.errorElement||S===0)?W.createElement(gi,{location:t.location,revalidation:t.revalidation,component:b,error:T,children:C(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):C()},null)}var jt=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(jt||{});function mi(r){let e=W.useContext(li);return e||ie(!1),e}function wi(r){let e=W.useContext(lt);return e||ie(!1),e}function bi(r){let e=wi(),t=e.matches[e.matches.length-1];return t.route.id||ie(!1),t.route.id}function Ei(){var r;let e=W.useContext(on),t=mi(jt.UseRouteError),n=bi(jt.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}const lr={};function vi(r,e){lr[e]||(lr[e]=!0,console.warn(e))}const cr=(r,e,t)=>vi(r,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+r+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function Ri(r,e){r?.v7_startTransition===void 0&&cr("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),r?.v7_relativeSplatPath===void 0&&cr("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function an(r){ie(!1)}function Ci(r){let{basename:e="/",children:t=null,location:n,navigationType:l=we.Pop,navigator:u,static:f=!1,future:o}=r;Jt()&&ie(!1);let p=e.replace(/^\/*/,"/"),w=W.useMemo(()=>({basename:p,navigator:u,static:f,future:ot({v7_relativeSplatPath:!1},o)}),[p,o,u,f]);typeof n=="string"&&(n=at(n));let{pathname:E="/",search:_="",hash:S="",state:T=null,key:c="default"}=n,b=W.useMemo(()=>{let m=rn(E,p);return m==null?null:{location:{pathname:m,search:_,hash:S,state:T,key:c},navigationType:l}},[p,E,_,S,T,c,l]);return b==null?null:W.createElement(sn.Provider,{value:w},W.createElement(ut.Provider,{children:t,value:b}))}function Si(r){let{children:e,location:t}=r;return fi(Wt(e),t)}new Promise(()=>{});function Wt(r,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(r,(n,l)=>{if(!W.isValidElement(n))return;let u=[...e,l];if(n.type===W.Fragment){t.push.apply(t,Wt(n.props.children,u));return}n.type!==an&&ie(!1),!n.props.index||!n.props.children||ie(!1);let f={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(f.children=Wt(n.props.children,u)),t.push(f)}),t}/**
 * React Router DOM v6.28.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xi="6";try{window.__reactRouterVersion=xi}catch{}const Ti="startTransition",fr=W[Ti];function un(r){let{basename:e,children:t,future:n,window:l}=r,u=W.useRef();u.current==null&&(u.current=jn({window:l,v5Compat:!0}));let f=u.current,[o,p]=W.useState({action:f.action,location:f.location}),{v7_startTransition:w}=n||{},E=W.useCallback(_=>{w&&fr?fr(()=>p(_)):p(_)},[p,w]);return W.useLayoutEffect(()=>f.listen(E),[f,E]),W.useEffect(()=>Ri(n),[n]),W.createElement(Ci,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:f,future:n})}var hr;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(hr||(hr={}));var dr;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(dr||(dr={}));const de=Object.create(null);de.open="0";de.close="1";de.ping="2";de.pong="3";de.message="4";de.upgrade="5";de.noop="6";const et=Object.create(null);Object.keys(de).forEach(r=>{et[de[r]]=r});const $t={type:"error",data:"parser error"},ln=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cn=typeof ArrayBuffer=="function",fn=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,zt=({type:r,data:e},t,n)=>ln&&e instanceof Blob?t?n(e):pr(e,n):cn&&(e instanceof ArrayBuffer||fn(e))?t?n(e):pr(new Blob([e]),n):n(de[r]+(e||"")),pr=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)};function gr(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let pt;function Ai(r,e){if(ln&&r.data instanceof Blob)return r.data.arrayBuffer().then(gr).then(e);if(cn&&(r.data instanceof ArrayBuffer||fn(r.data)))return e(gr(r.data));zt(r,!1,t=>{pt||(pt=new TextEncoder),e(pt.encode(t))})}const yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<yr.length;r++)je[yr.charCodeAt(r)]=r;const Bi=r=>{let e=r.length*.75,t=r.length,n,l=0,u,f,o,p;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const w=new ArrayBuffer(e),E=new Uint8Array(w);for(n=0;n<t;n+=4)u=je[r.charCodeAt(n)],f=je[r.charCodeAt(n+1)],o=je[r.charCodeAt(n+2)],p=je[r.charCodeAt(n+3)],E[l++]=u<<2|f>>4,E[l++]=(f&15)<<4|o>>2,E[l++]=(o&3)<<6|p&63;return w},Oi=typeof ArrayBuffer=="function",Xt=(r,e)=>{if(typeof r!="string")return{type:"message",data:hn(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:Ni(r.substring(1),e)}:et[t]?r.length>1?{type:et[t],data:r.substring(1)}:{type:et[t]}:$t},Ni=(r,e)=>{if(Oi){const t=Bi(r);return hn(t,e)}else return{base64:!0,data:r}},hn=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},dn="",Ii=(r,e)=>{const t=r.length,n=new Array(t);let l=0;r.forEach((u,f)=>{zt(u,!1,o=>{n[f]=o,++l===t&&e(n.join(dn))})})},ki=(r,e)=>{const t=r.split(dn),n=[];for(let l=0;l<t.length;l++){const u=Xt(t[l],e);if(n.push(u),u.type==="error")break}return n};function Li(){return new TransformStream({transform(r,e){Ai(r,t=>{const n=t.length;let l;if(n<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,n);else if(n<65536){l=new Uint8Array(3);const u=new DataView(l.buffer);u.setUint8(0,126),u.setUint16(1,n)}else{l=new Uint8Array(9);const u=new DataView(l.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(l[0]|=128),e.enqueue(l),e.enqueue(t)})}})}let gt;function He(r){return r.reduce((e,t)=>e+t.length,0)}function Ye(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let n=0;for(let l=0;l<e;l++)t[l]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),t}function Fi(r,e){gt||(gt=new TextDecoder);const t=[];let n=0,l=-1,u=!1;return new TransformStream({transform(f,o){for(t.push(f);;){if(n===0){if(He(t)<1)break;const p=Ye(t,1);u=(p[0]&128)===128,l=p[0]&127,l<126?n=3:l===126?n=1:n=2}else if(n===1){if(He(t)<2)break;const p=Ye(t,2);l=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),n=3}else if(n===2){if(He(t)<8)break;const p=Ye(t,8),w=new DataView(p.buffer,p.byteOffset,p.length),E=w.getUint32(0);if(E>Math.pow(2,21)-1){o.enqueue($t);break}l=E*Math.pow(2,32)+w.getUint32(4),n=3}else{if(He(t)<l)break;const p=Ye(t,l);o.enqueue(Xt(u?p:gt.decode(p),e)),n=0}if(l===0||l>r){o.enqueue($t);break}}}})}const pn=4;function te(r){if(r)return Pi(r)}function Pi(r){for(var e in te.prototype)r[e]=te.prototype[e];return r}te.prototype.on=te.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};te.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};te.prototype.off=te.prototype.removeListener=te.prototype.removeAllListeners=te.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,l=0;l<t.length;l++)if(n=t[l],n===e||n.fn===e){t.splice(l,1);break}return t.length===0&&delete this._callbacks["$"+r],this};te.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,l=t.length;n<l;++n)t[n].apply(this,e)}return this};te.prototype.emitReserved=te.prototype.emit;te.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};te.prototype.hasListeners=function(r){return!!this.listeners(r).length};const ct=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ae=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Mi="arraybuffer";function gn(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const Di=ae.setTimeout,Ui=ae.clearTimeout;function ft(r,e){e.useNativeTimers?(r.setTimeoutFn=Di.bind(ae),r.clearTimeoutFn=Ui.bind(ae)):(r.setTimeoutFn=ae.setTimeout.bind(ae),r.clearTimeoutFn=ae.clearTimeout.bind(ae))}const qi=1.33;function ji(r){return typeof r=="string"?Wi(r):Math.ceil((r.byteLength||r.size)*qi)}function Wi(r){let e=0,t=0;for(let n=0,l=r.length;n<l;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function yn(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $i(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function Vi(r){let e={},t=r.split("&");for(let n=0,l=t.length;n<l;n++){let u=t[n].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class Hi extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Qt extends te{constructor(e){super(),this.writable=!1,ft(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Hi(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Xt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=$i(e);return t.length?"?"+t:""}}class Yi extends Qt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ki(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ii(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=yn()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let _n=!1;try{_n=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ki=_n;function Gi(){}class Ji extends Yi{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(l,u)=>{this.onError("xhr post error",l,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class he extends te{constructor(e,t,n){super(),this.createRequest=e,ft(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=gn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&n.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var l;n.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=he.requestsCount++,he.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Gi,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete he.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}he.requestsCount=0;he.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_r);else if(typeof addEventListener=="function"){const r="onpagehide"in ae?"pagehide":"unload";addEventListener(r,_r,!1)}}function _r(){for(let r in he.requests)he.requests.hasOwnProperty(r)&&he.requests[r].abort()}const zi=function(){const r=mn({xdomain:!1});return r&&r.responseType!==null}();class Xi extends Ji{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=zi&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new he(mn,this.uri(),e)}}function mn(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ki))return new XMLHttpRequest}catch{}if(!e)try{return new ae[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const wn=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qi extends Qt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=wn?{}:gn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],l=t===e.length-1;zt(n,this.supportsBinary,u=>{try{this.doWrite(n,u)}catch{}l&&ct(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=yn()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const yt=ae.WebSocket||ae.MozWebSocket;class Zi extends Qi{createSocket(e,t,n){return wn?new yt(e,t,n):t?new yt(e,t):new yt(e)}doWrite(e,t){this.ws.send(t)}}class es extends Qt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Fi(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),l=Li();l.readable.pipeTo(e.writable),this._writer=l.writable.getWriter();const u=()=>{n.read().then(({done:o,value:p})=>{o||(this.onPacket(p),u())}).catch(o=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],l=t===e.length-1;this._writer.write(n).then(()=>{l&&ct(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ts={websocket:Zi,webtransport:es,polling:Xi},rs=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ns=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Vt(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let l=rs.exec(r||""),u={},f=14;for(;f--;)u[ns[f]]=l[f]||"";return t!=-1&&n!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=is(u,u.path),u.queryKey=ss(u,u.query),u}function is(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ss(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,l,u){l&&(t[l]=u)}),t}const Ht=typeof addEventListener=="function"&&typeof removeEventListener=="function",tt=[];Ht&&addEventListener("offline",()=>{tt.forEach(r=>r())},!1);class be extends te{constructor(e,t){if(super(),this.binaryType=Mi,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Vt(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Vt(t.host).host);ft(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const l=n.prototype.name;this.transports.push(l),this._transportsByName[l]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vi(this.opts.query)),Ht&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=pn,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&be.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",be.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const l=this.writeBuffer[n].data;if(l&&(t+=ji(l)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ct(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,l){if(typeof t=="function"&&(l=t,t=void 0),typeof n=="function"&&(l=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const u={type:e,data:t,options:n};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),l&&this.once("flush",l),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(be.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ht&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=tt.indexOf(this._offlineEventListener);n!==-1&&tt.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}be.protocol=pn;class os extends be{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;be.priorWebsocketSuccess=!1;const l=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",_=>{if(!n)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;be.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(E(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const S=new Error("probe error");S.transport=t.name,this.emitReserved("upgradeError",S)}}))};function u(){n||(n=!0,E(),t.close(),t=null)}const f=_=>{const S=new Error("probe error: "+_);S.transport=t.name,u(),this.emitReserved("upgradeError",S)};function o(){f("transport closed")}function p(){f("socket closed")}function w(_){t&&_.name!==t.name&&u()}const E=()=>{t.removeListener("open",l),t.removeListener("error",f),t.removeListener("close",o),this.off("close",p),this.off("upgrading",w)};t.once("open",l),t.once("error",f),t.once("close",o),this.once("close",p),this.once("upgrading",w),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let as=class extends os{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(l=>ts[l]).filter(l=>!!l)),super(e,n)}};function us(r,e="",t){let n=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),n=Vt(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const u=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+u+":"+n.port+e,n.href=n.protocol+"://"+u+(t&&t.port===n.port?"":":"+n.port),n}const ls=typeof ArrayBuffer=="function",cs=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,bn=Object.prototype.toString,fs=typeof Blob=="function"||typeof Blob<"u"&&bn.call(Blob)==="[object BlobConstructor]",hs=typeof File=="function"||typeof File<"u"&&bn.call(File)==="[object FileConstructor]";function Zt(r){return ls&&(r instanceof ArrayBuffer||cs(r))||fs&&r instanceof Blob||hs&&r instanceof File}function rt(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(rt(r[t]))return!0;return!1}if(Zt(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return rt(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&rt(r[t]))return!0;return!1}function ds(r){const e=[],t=r.data,n=r;return n.data=Yt(t,e),n.attachments=e.length,{packet:n,buffers:e}}function Yt(r,e){if(!r)return r;if(Zt(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=Yt(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=Yt(r[n],e));return t}return r}function ps(r,e){return r.data=Kt(r.data,e),delete r.attachments,r}function Kt(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=Kt(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=Kt(r[t],e));return r}const gs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ys=5;var Y;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Y||(Y={}));class _s{constructor(e){this.replacer=e}encode(e){return(e.type===Y.EVENT||e.type===Y.ACK)&&rt(e)?this.encodeAsBinary({type:e.type===Y.EVENT?Y.BINARY_EVENT:Y.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Y.BINARY_EVENT||e.type===Y.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ds(e),n=this.encodeAsString(t.packet),l=t.buffers;return l.unshift(n),l}}function mr(r){return Object.prototype.toString.call(r)==="[object Object]"}class er extends te{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Y.BINARY_EVENT;n||t.type===Y.BINARY_ACK?(t.type=n?Y.EVENT:Y.ACK,this.reconstructor=new ms(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Zt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Y[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Y.BINARY_EVENT||n.type===Y.BINARY_ACK){const u=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const f=e.substring(u,t);if(f!=Number(f)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(f)}if(e.charAt(t+1)==="/"){const u=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(u,t)}else n.nsp="/";const l=e.charAt(t+1);if(l!==""&&Number(l)==l){const u=t+1;for(;++t;){const f=e.charAt(t);if(f==null||Number(f)!=f){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){const u=this.tryParse(e.substr(t));if(er.isPayloadValid(n.type,u))n.data=u;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Y.CONNECT:return mr(t);case Y.DISCONNECT:return t===void 0;case Y.CONNECT_ERROR:return typeof t=="string"||mr(t);case Y.EVENT:case Y.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&gs.indexOf(t[0])===-1);case Y.ACK:case Y.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ms{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=ps(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ws=Object.freeze(Object.defineProperty({__proto__:null,Decoder:er,Encoder:_s,get PacketType(){return Y},protocol:ys},Symbol.toStringTag,{value:"Module"}));function ce(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const bs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class En extends te{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ce(e,"open",this.onopen.bind(this)),ce(e,"packet",this.onpacket.bind(this)),ce(e,"error",this.onerror.bind(this)),ce(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,l,u;if(bs.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const f={type:Y.EVENT,data:t};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const E=this.ids++,_=t.pop();this._registerAckCallback(E,_),f.id=E}const o=(l=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||l===void 0?void 0:l.writable,p=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!o||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(e,t){var n;const l=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(l===void 0){this.acks[e]=t;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},l),f=(...o)=>{this.io.clearTimeoutFn(u),t.apply(this,o)};f.withError=!0,this.acks[e]=f}emitWithAck(e,...t){return new Promise((n,l)=>{const u=(f,o)=>f?l(f):n(o);u.withError=!0,t.push(u),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((l,...u)=>n!==this._queue[0]?void 0:(l!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(l)):(this._queue.shift(),t&&t(null,...u)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Y.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Y.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Y.EVENT:case Y.BINARY_EVENT:this.onevent(e);break;case Y.ACK:case Y.BINARY_ACK:this.onack(e);break;case Y.DISCONNECT:this.ondisconnect();break;case Y.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...l){n||(n=!0,t.packet({type:Y.ACK,id:e,data:l}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function ke(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}ke.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=Math.floor(e*10)&1?r+t:r-t}return Math.min(r,this.max)|0};ke.prototype.reset=function(){this.attempts=0};ke.prototype.setMin=function(r){this.ms=r};ke.prototype.setMax=function(r){this.max=r};ke.prototype.setJitter=function(r){this.jitter=r};class Gt extends te{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ft(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ke({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const l=t.parser||ws;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new as(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const l=ce(t,"open",function(){n.onopen(),e&&e()}),u=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},f=ce(t,"error",u);if(this._timeout!==!1){const o=this._timeout,p=this.setTimeoutFn(()=>{l(),u(new Error("timeout")),t.close()},o);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(l),this.subs.push(f),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ce(e,"ping",this.onping.bind(this)),ce(e,"data",this.ondata.bind(this)),ce(e,"error",this.onerror.bind(this)),ce(e,"close",this.onclose.bind(this)),ce(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){ct(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new En(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(l=>{l?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",l)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ue={};function nt(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=us(r,e.path||"/socket.io"),n=t.source,l=t.id,u=t.path,f=Ue[l]&&u in Ue[l].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||f;let p;return o?p=new Gt(n,e):(Ue[l]||(Ue[l]=new Gt(n,e)),p=Ue[l]),t.query&&!e.query&&(e.query=t.queryKey),p.socket(t.path,e)}Object.assign(nt,{Manager:Gt,Socket:En,io:nt,connect:nt});var Ke={exports:{}},_t,wr;function Es(){if(wr)return _t;wr=1;var r=1e3,e=r*60,t=e*60,n=t*24,l=n*7,u=n*365.25;_t=function(E,_){_=_||{};var S=typeof E;if(S==="string"&&E.length>0)return f(E);if(S==="number"&&isFinite(E))return _.long?p(E):o(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function f(E){if(E=String(E),!(E.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(_){var S=parseFloat(_[1]),T=(_[2]||"ms").toLowerCase();switch(T){case"years":case"year":case"yrs":case"yr":case"y":return S*u;case"weeks":case"week":case"w":return S*l;case"days":case"day":case"d":return S*n;case"hours":case"hour":case"hrs":case"hr":case"h":return S*t;case"minutes":case"minute":case"mins":case"min":case"m":return S*e;case"seconds":case"second":case"secs":case"sec":case"s":return S*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}function o(E){var _=Math.abs(E);return _>=n?Math.round(E/n)+"d":_>=t?Math.round(E/t)+"h":_>=e?Math.round(E/e)+"m":_>=r?Math.round(E/r)+"s":E+"ms"}function p(E){var _=Math.abs(E);return _>=n?w(E,_,n,"day"):_>=t?w(E,_,t,"hour"):_>=e?w(E,_,e,"minute"):_>=r?w(E,_,r,"second"):E+" ms"}function w(E,_,S,T){var c=_>=S*1.5;return Math.round(E/S)+" "+T+(c?"s":"")}return _t}var mt,br;function vs(){if(br)return mt;br=1;function r(e){n.debug=n,n.default=n,n.coerce=w,n.disable=o,n.enable=u,n.enabled=p,n.humanize=Es(),n.destroy=E,Object.keys(e).forEach(_=>{n[_]=e[_]}),n.names=[],n.skips=[],n.formatters={};function t(_){let S=0;for(let T=0;T<_.length;T++)S=(S<<5)-S+_.charCodeAt(T),S|=0;return n.colors[Math.abs(S)%n.colors.length]}n.selectColor=t;function n(_){let S,T=null,c,b;function m(...y){if(!m.enabled)return;const C=m,I=Number(new Date),x=I-(S||I);C.diff=x,C.prev=S,C.curr=I,S=I,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let R=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(P,F)=>{if(P==="%%")return"%";R++;const D=n.formatters[F];if(typeof D=="function"){const j=y[R];P=D.call(C,j),y.splice(R,1),R--}return P}),n.formatArgs.call(C,y),(C.log||n.log).apply(C,y)}return m.namespace=_,m.useColors=n.useColors(),m.color=n.selectColor(_),m.extend=l,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(c!==n.namespaces&&(c=n.namespaces,b=n.enabled(_)),b),set:y=>{T=y}}),typeof n.init=="function"&&n.init(m),m}function l(_,S){const T=n(this.namespace+(typeof S>"u"?":":S)+_);return T.log=this.log,T}function u(_){n.save(_),n.namespaces=_,n.names=[],n.skips=[];const S=(typeof _=="string"?_:"").trim().replace(" ",",").split(",").filter(Boolean);for(const T of S)T[0]==="-"?n.skips.push(T.slice(1)):n.names.push(T)}function f(_,S){let T=0,c=0,b=-1,m=0;for(;T<_.length;)if(c<S.length&&(S[c]===_[T]||S[c]==="*"))S[c]==="*"?(b=c,m=T,c++):(T++,c++);else if(b!==-1)c=b+1,m++,T=m;else return!1;for(;c<S.length&&S[c]==="*";)c++;return c===S.length}function o(){const _=[...n.names,...n.skips.map(S=>"-"+S)].join(",");return n.enable(""),_}function p(_){for(const S of n.skips)if(f(_,S))return!1;for(const S of n.names)if(f(_,S))return!0;return!1}function w(_){return _ instanceof Error?_.stack||_.message:_}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return mt=r,mt}var Er;function Rs(){return Er||(Er=1,function(r,e){var t={};e.formatArgs=l,e.save=u,e.load=f,e.useColors=n,e.storage=o(),e.destroy=(()=>{let w=!1;return()=>{w||(w=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let w;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(w=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(w[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(w){if(w[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+w[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const E="color: "+this.color;w.splice(1,0,E,"color: inherit");let _=0,S=0;w[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(_++,T==="%c"&&(S=_))}),w.splice(S,0,E)}e.log=console.debug||console.log||(()=>{});function u(w){try{w?e.storage.setItem("debug",w):e.storage.removeItem("debug")}catch{}}function f(){let w;try{w=e.storage.getItem("debug")}catch{}return!w&&typeof process<"u"&&"env"in process&&(w=t.DEBUG),w}function o(){try{return localStorage}catch{}}r.exports=vs()(e);const{formatters:p}=r.exports;p.j=function(w){try{return JSON.stringify(w)}catch(E){return"[UnexpectedJSONParseError]: "+E.message}}}(Ke,Ke.exports)),Ke.exports}var wt,vr;function Cs(){return vr||(vr=1,wt=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}),wt}var Ge={exports:{}},Je={exports:{}},bt={},qe={},Rr;function Ss(){if(Rr)return qe;Rr=1,qe.byteLength=o,qe.toByteArray=w,qe.fromByteArray=S;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=n.length;l<u;++l)r[l]=n[l],e[n.charCodeAt(l)]=l;e[45]=62,e[95]=63;function f(T){var c=T.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=T.indexOf("=");b===-1&&(b=c);var m=b===c?0:4-b%4;return[b,m]}function o(T){var c=f(T),b=c[0],m=c[1];return(b+m)*3/4-m}function p(T,c,b){return(c+b)*3/4-b}function w(T){var c,b=f(T),m=b[0],y=b[1],C=new t(p(T,m,y)),I=0,x=y>0?m-4:m,R;for(R=0;R<x;R+=4)c=e[T.charCodeAt(R)]<<18|e[T.charCodeAt(R+1)]<<12|e[T.charCodeAt(R+2)]<<6|e[T.charCodeAt(R+3)],C[I++]=c>>16&255,C[I++]=c>>8&255,C[I++]=c&255;return y===2&&(c=e[T.charCodeAt(R)]<<2|e[T.charCodeAt(R+1)]>>4,C[I++]=c&255),y===1&&(c=e[T.charCodeAt(R)]<<10|e[T.charCodeAt(R+1)]<<4|e[T.charCodeAt(R+2)]>>2,C[I++]=c>>8&255,C[I++]=c&255),C}function E(T){return r[T>>18&63]+r[T>>12&63]+r[T>>6&63]+r[T&63]}function _(T,c,b){for(var m,y=[],C=c;C<b;C+=3)m=(T[C]<<16&16711680)+(T[C+1]<<8&65280)+(T[C+2]&255),y.push(E(m));return y.join("")}function S(T){for(var c,b=T.length,m=b%3,y=[],C=16383,I=0,x=b-m;I<x;I+=C)y.push(_(T,I,I+C>x?x:I+C));return m===1?(c=T[b-1],y.push(r[c>>2]+r[c<<4&63]+"==")):m===2&&(c=(T[b-2]<<8)+T[b-1],y.push(r[c>>10]+r[c>>4&63]+r[c<<2&63]+"=")),y.join("")}return qe}var ze={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Cr;function xs(){return Cr||(Cr=1,ze.read=function(r,e,t,n,l){var u,f,o=l*8-n-1,p=(1<<o)-1,w=p>>1,E=-7,_=t?l-1:0,S=t?-1:1,T=r[e+_];for(_+=S,u=T&(1<<-E)-1,T>>=-E,E+=o;E>0;u=u*256+r[e+_],_+=S,E-=8);for(f=u&(1<<-E)-1,u>>=-E,E+=n;E>0;f=f*256+r[e+_],_+=S,E-=8);if(u===0)u=1-w;else{if(u===p)return f?NaN:(T?-1:1)*(1/0);f=f+Math.pow(2,n),u=u-w}return(T?-1:1)*f*Math.pow(2,u-n)},ze.write=function(r,e,t,n,l,u){var f,o,p,w=u*8-l-1,E=(1<<w)-1,_=E>>1,S=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:u-1,c=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,f=E):(f=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-f))<1&&(f--,p*=2),f+_>=1?e+=S/p:e+=S*Math.pow(2,1-_),e*p>=2&&(f++,p/=2),f+_>=E?(o=0,f=E):f+_>=1?(o=(e*p-1)*Math.pow(2,l),f=f+_):(o=e*Math.pow(2,_-1)*Math.pow(2,l),f=0));l>=8;r[t+T]=o&255,T+=c,o/=256,l-=8);for(f=f<<l|o,w+=l;w>0;r[t+T]=f&255,T+=c,f/=256,w-=8);r[t+T-c]|=b*128}),ze}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Sr;function We(){return Sr||(Sr=1,function(r){const e=Ss(),t=xs(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=o,r.SlowBuffer=C,r.INSPECT_MAX_BYTES=50;const l=2147483647;r.kMaxLength=l,o.TYPED_ARRAY_SUPPORT=u(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const a=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(a,i),a.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(a){if(a>l)throw new RangeError('The value "'+a+'" is invalid for option "size"');const i=new Uint8Array(a);return Object.setPrototypeOf(i,o.prototype),i}function o(a,i,s){if(typeof a=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(a)}return p(a,i,s)}o.poolSize=8192;function p(a,i,s){if(typeof a=="string")return S(a,i);if(ArrayBuffer.isView(a))return c(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(se(a,ArrayBuffer)||a&&se(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(a,SharedArrayBuffer)||a&&se(a.buffer,SharedArrayBuffer)))return b(a,i,s);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const h=a.valueOf&&a.valueOf();if(h!=null&&h!==a)return o.from(h,i,s);const v=m(a);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return o.from(a[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}o.from=function(a,i,s){return p(a,i,s)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function w(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function E(a,i,s){return w(a),a<=0?f(a):i!==void 0?typeof s=="string"?f(a).fill(i,s):f(a).fill(i):f(a)}o.alloc=function(a,i,s){return E(a,i,s)};function _(a){return w(a),f(a<0?0:y(a)|0)}o.allocUnsafe=function(a){return _(a)},o.allocUnsafeSlow=function(a){return _(a)};function S(a,i){if((typeof i!="string"||i==="")&&(i="utf8"),!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const s=I(a,i)|0;let h=f(s);const v=h.write(a,i);return v!==s&&(h=h.slice(0,v)),h}function T(a){const i=a.length<0?0:y(a.length)|0,s=f(i);for(let h=0;h<i;h+=1)s[h]=a[h]&255;return s}function c(a){if(se(a,Uint8Array)){const i=new Uint8Array(a);return b(i.buffer,i.byteOffset,i.byteLength)}return T(a)}function b(a,i,s){if(i<0||a.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');let h;return i===void 0&&s===void 0?h=new Uint8Array(a):s===void 0?h=new Uint8Array(a,i):h=new Uint8Array(a,i,s),Object.setPrototypeOf(h,o.prototype),h}function m(a){if(o.isBuffer(a)){const i=y(a.length)|0,s=f(i);return s.length===0||a.copy(s,0,0,i),s}if(a.length!==void 0)return typeof a.length!="number"||ve(a.length)?f(0):T(a);if(a.type==="Buffer"&&Array.isArray(a.data))return T(a.data)}function y(a){if(a>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return a|0}function C(a){return+a!=a&&(a=0),o.alloc(+a)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,s){if(se(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),se(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),!o.isBuffer(i)||!o.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let h=i.length,v=s.length;for(let O=0,k=Math.min(h,v);O<k;++O)if(i[O]!==s[O]){h=i[O],v=s[O];break}return h<v?-1:v<h?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,s){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let h;if(s===void 0)for(s=0,h=0;h<i.length;++h)s+=i[h].length;const v=o.allocUnsafe(s);let O=0;for(h=0;h<i.length;++h){let k=i[h];if(se(k,Uint8Array))O+k.length>v.length?(o.isBuffer(k)||(k=o.from(k)),k.copy(v,O)):Uint8Array.prototype.set.call(v,k,O);else if(o.isBuffer(k))k.copy(v,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=k.length}return v};function I(a,i){if(o.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||se(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);const s=a.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&s===0)return 0;let v=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return K(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return Pe(a).length;default:if(v)return h?-1:K(a).length;i=(""+i).toLowerCase(),v=!0}}o.byteLength=I;function x(a,i,s){let h=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,i>>>=0,s<=i))return"";for(a||(a="utf8");;)switch(a){case"hex":return _e(this,i,s);case"utf8":case"utf-8":return ye(this,i,s);case"ascii":return pe(this,i,s);case"latin1":case"binary":return Se(this,i,s);case"base64":return le(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,i,s);default:if(h)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),h=!0}}o.prototype._isBuffer=!0;function R(a,i,s){const h=a[i];a[i]=a[s],a[s]=h}o.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)R(this,s,s+1);return this},o.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)R(this,s,s+3),R(this,s+1,s+2);return this},o.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)R(this,s,s+7),R(this,s+1,s+6),R(this,s+2,s+5),R(this,s+3,s+4);return this},o.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?ye(this,0,i):x.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="";const s=r.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,s,h,v,O){if(se(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(s===void 0&&(s=0),h===void 0&&(h=i?i.length:0),v===void 0&&(v=0),O===void 0&&(O=this.length),s<0||h>i.length||v<0||O>this.length)throw new RangeError("out of range index");if(v>=O&&s>=h)return 0;if(v>=O)return-1;if(s>=h)return 1;if(s>>>=0,h>>>=0,v>>>=0,O>>>=0,this===i)return 0;let k=O-v,H=h-s;const Z=Math.min(k,H),X=this.slice(v,O),ee=i.slice(s,h);for(let J=0;J<Z;++J)if(X[J]!==ee[J]){k=X[J],H=ee[J];break}return k<H?-1:H<k?1:0};function A(a,i,s,h,v){if(a.length===0)return-1;if(typeof s=="string"?(h=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,ve(s)&&(s=v?0:a.length-1),s<0&&(s=a.length+s),s>=a.length){if(v)return-1;s=a.length-1}else if(s<0)if(v)s=0;else return-1;if(typeof i=="string"&&(i=o.from(i,h)),o.isBuffer(i))return i.length===0?-1:P(a,i,s,h,v);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(a,i,s):Uint8Array.prototype.lastIndexOf.call(a,i,s):P(a,[i],s,h,v);throw new TypeError("val must be string, number or Buffer")}function P(a,i,s,h,v){let O=1,k=a.length,H=i.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(a.length<2||i.length<2)return-1;O=2,k/=2,H/=2,s/=2}function Z(ee,J){return O===1?ee[J]:ee.readUInt16BE(J*O)}let X;if(v){let ee=-1;for(X=s;X<k;X++)if(Z(a,X)===Z(i,ee===-1?0:X-ee)){if(ee===-1&&(ee=X),X-ee+1===H)return ee*O}else ee!==-1&&(X-=X-ee),ee=-1}else for(s+H>k&&(s=k-H),X=s;X>=0;X--){let ee=!0;for(let J=0;J<H;J++)if(Z(a,X+J)!==Z(i,J)){ee=!1;break}if(ee)return X}return-1}o.prototype.includes=function(i,s,h){return this.indexOf(i,s,h)!==-1},o.prototype.indexOf=function(i,s,h){return A(this,i,s,h,!0)},o.prototype.lastIndexOf=function(i,s,h){return A(this,i,s,h,!1)};function F(a,i,s,h){s=Number(s)||0;const v=a.length-s;h?(h=Number(h),h>v&&(h=v)):h=v;const O=i.length;h>O/2&&(h=O/2);let k;for(k=0;k<h;++k){const H=parseInt(i.substr(k*2,2),16);if(ve(H))return k;a[s+k]=H}return k}function D(a,i,s,h){return Oe(K(i,a.length-s),a,s,h)}function j(a,i,s,h){return Oe(me(i),a,s,h)}function re(a,i,s,h){return Oe(Pe(i),a,s,h)}function ue(a,i,s,h){return Oe(Be(i,a.length-s),a,s,h)}o.prototype.write=function(i,s,h,v){if(s===void 0)v="utf8",h=this.length,s=0;else if(h===void 0&&typeof s=="string")v=s,h=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(h)?(h=h>>>0,v===void 0&&(v="utf8")):(v=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const O=this.length-s;if((h===void 0||h>O)&&(h=O),i.length>0&&(h<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let k=!1;for(;;)switch(v){case"hex":return F(this,i,s,h);case"utf8":case"utf-8":return D(this,i,s,h);case"ascii":case"latin1":case"binary":return j(this,i,s,h);case"base64":return re(this,i,s,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,i,s,h);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),k=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function le(a,i,s){return i===0&&s===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(i,s))}function ye(a,i,s){s=Math.min(a.length,s);const h=[];let v=i;for(;v<s;){const O=a[v];let k=null,H=O>239?4:O>223?3:O>191?2:1;if(v+H<=s){let Z,X,ee,J;switch(H){case 1:O<128&&(k=O);break;case 2:Z=a[v+1],(Z&192)===128&&(J=(O&31)<<6|Z&63,J>127&&(k=J));break;case 3:Z=a[v+1],X=a[v+2],(Z&192)===128&&(X&192)===128&&(J=(O&15)<<12|(Z&63)<<6|X&63,J>2047&&(J<55296||J>57343)&&(k=J));break;case 4:Z=a[v+1],X=a[v+2],ee=a[v+3],(Z&192)===128&&(X&192)===128&&(ee&192)===128&&(J=(O&15)<<18|(Z&63)<<12|(X&63)<<6|ee&63,J>65535&&J<1114112&&(k=J))}}k===null?(k=65533,H=1):k>65535&&(k-=65536,h.push(k>>>10&1023|55296),k=56320|k&1023),h.push(k),v+=H}return Fe(h)}const Ee=4096;function Fe(a){const i=a.length;if(i<=Ee)return String.fromCharCode.apply(String,a);let s="",h=0;for(;h<i;)s+=String.fromCharCode.apply(String,a.slice(h,h+=Ee));return s}function pe(a,i,s){let h="";s=Math.min(a.length,s);for(let v=i;v<s;++v)h+=String.fromCharCode(a[v]&127);return h}function Se(a,i,s){let h="";s=Math.min(a.length,s);for(let v=i;v<s;++v)h+=String.fromCharCode(a[v]);return h}function _e(a,i,s){const h=a.length;(!i||i<0)&&(i=0),(!s||s<0||s>h)&&(s=h);let v="";for(let O=i;O<s;++O)v+=Me[a[O]];return v}function xe(a,i,s){const h=a.slice(i,s);let v="";for(let O=0;O<h.length-1;O+=2)v+=String.fromCharCode(h[O]+h[O+1]*256);return v}o.prototype.slice=function(i,s){const h=this.length;i=~~i,s=s===void 0?h:~~s,i<0?(i+=h,i<0&&(i=0)):i>h&&(i=h),s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),s<i&&(s=i);const v=this.subarray(i,s);return Object.setPrototypeOf(v,o.prototype),v};function Q(a,i,s){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+i>s)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,s,h){i=i>>>0,s=s>>>0,h||Q(i,s,this.length);let v=this[i],O=1,k=0;for(;++k<s&&(O*=256);)v+=this[i+k]*O;return v},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,s,h){i=i>>>0,s=s>>>0,h||Q(i,s,this.length);let v=this[i+--s],O=1;for(;s>0&&(O*=256);)v+=this[i+--s]*O;return v},o.prototype.readUint8=o.prototype.readUInt8=function(i,s){return i=i>>>0,s||Q(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,s){return i=i>>>0,s||Q(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,s){return i=i>>>0,s||Q(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,s){return i=i>>>0,s||Q(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,s){return i=i>>>0,s||Q(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=oe(function(i){i=i>>>0,L(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&U(i,this.length-8);const v=s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,O=this[++i]+this[++i]*2**8+this[++i]*2**16+h*2**24;return BigInt(v)+(BigInt(O)<<BigInt(32))}),o.prototype.readBigUInt64BE=oe(function(i){i=i>>>0,L(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&U(i,this.length-8);const v=s*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],O=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h;return(BigInt(v)<<BigInt(32))+BigInt(O)}),o.prototype.readIntLE=function(i,s,h){i=i>>>0,s=s>>>0,h||Q(i,s,this.length);let v=this[i],O=1,k=0;for(;++k<s&&(O*=256);)v+=this[i+k]*O;return O*=128,v>=O&&(v-=Math.pow(2,8*s)),v},o.prototype.readIntBE=function(i,s,h){i=i>>>0,s=s>>>0,h||Q(i,s,this.length);let v=s,O=1,k=this[i+--v];for(;v>0&&(O*=256);)k+=this[i+--v]*O;return O*=128,k>=O&&(k-=Math.pow(2,8*s)),k},o.prototype.readInt8=function(i,s){return i=i>>>0,s||Q(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,s){i=i>>>0,s||Q(i,2,this.length);const h=this[i]|this[i+1]<<8;return h&32768?h|4294901760:h},o.prototype.readInt16BE=function(i,s){i=i>>>0,s||Q(i,2,this.length);const h=this[i+1]|this[i]<<8;return h&32768?h|4294901760:h},o.prototype.readInt32LE=function(i,s){return i=i>>>0,s||Q(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,s){return i=i>>>0,s||Q(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=oe(function(i){i=i>>>0,L(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&U(i,this.length-8);const v=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(h<<24);return(BigInt(v)<<BigInt(32))+BigInt(s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=oe(function(i){i=i>>>0,L(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&U(i,this.length-8);const v=(s<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(v)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h)}),o.prototype.readFloatLE=function(i,s){return i=i>>>0,s||Q(i,4,this.length),t.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,s){return i=i>>>0,s||Q(i,4,this.length),t.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,s){return i=i>>>0,s||Q(i,8,this.length),t.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,s){return i=i>>>0,s||Q(i,8,this.length),t.read(this,i,!1,52,8)};function ne(a,i,s,h,v,O){if(!o.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>v||i<O)throw new RangeError('"value" argument is out of bounds');if(s+h>a.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,s,h,v){if(i=+i,s=s>>>0,h=h>>>0,!v){const H=Math.pow(2,8*h)-1;ne(this,i,s,h,H,0)}let O=1,k=0;for(this[s]=i&255;++k<h&&(O*=256);)this[s+k]=i/O&255;return s+h},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,s,h,v){if(i=+i,s=s>>>0,h=h>>>0,!v){const H=Math.pow(2,8*h)-1;ne(this,i,s,h,H,0)}let O=h-1,k=1;for(this[s+O]=i&255;--O>=0&&(k*=256);)this[s+O]=i/k&255;return s+h},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,1,255,0),this[s]=i&255,s+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,2,65535,0),this[s]=i&255,this[s+1]=i>>>8,s+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=i&255,s+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=i&255,s+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4};function fe(a,i,s,h,v){g(i,h,v,a,s,7);let O=Number(i&BigInt(4294967295));a[s++]=O,O=O>>8,a[s++]=O,O=O>>8,a[s++]=O,O=O>>8,a[s++]=O;let k=Number(i>>BigInt(32)&BigInt(4294967295));return a[s++]=k,k=k>>8,a[s++]=k,k=k>>8,a[s++]=k,k=k>>8,a[s++]=k,s}function Te(a,i,s,h,v){g(i,h,v,a,s,7);let O=Number(i&BigInt(4294967295));a[s+7]=O,O=O>>8,a[s+6]=O,O=O>>8,a[s+5]=O,O=O>>8,a[s+4]=O;let k=Number(i>>BigInt(32)&BigInt(4294967295));return a[s+3]=k,k=k>>8,a[s+2]=k,k=k>>8,a[s+1]=k,k=k>>8,a[s]=k,s+8}o.prototype.writeBigUInt64LE=oe(function(i,s=0){return fe(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=oe(function(i,s=0){return Te(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,s,h,v){if(i=+i,s=s>>>0,!v){const Z=Math.pow(2,8*h-1);ne(this,i,s,h,Z-1,-Z)}let O=0,k=1,H=0;for(this[s]=i&255;++O<h&&(k*=256);)i<0&&H===0&&this[s+O-1]!==0&&(H=1),this[s+O]=(i/k>>0)-H&255;return s+h},o.prototype.writeIntBE=function(i,s,h,v){if(i=+i,s=s>>>0,!v){const Z=Math.pow(2,8*h-1);ne(this,i,s,h,Z-1,-Z)}let O=h-1,k=1,H=0;for(this[s+O]=i&255;--O>=0&&(k*=256);)i<0&&H===0&&this[s+O+1]!==0&&(H=1),this[s+O]=(i/k>>0)-H&255;return s+h},o.prototype.writeInt8=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=i&255,s+1},o.prototype.writeInt16LE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,2,32767,-32768),this[s]=i&255,this[s+1]=i>>>8,s+2},o.prototype.writeInt16BE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=i&255,s+2},o.prototype.writeInt32LE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,4,2147483647,-2147483648),this[s]=i&255,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},o.prototype.writeInt32BE=function(i,s,h){return i=+i,s=s>>>0,h||ne(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4},o.prototype.writeBigInt64LE=oe(function(i,s=0){return fe(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=oe(function(i,s=0){return Te(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(a,i,s,h,v,O){if(s+h>a.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function N(a,i,s,h,v){return i=+i,s=s>>>0,v||Ae(a,i,s,4),t.write(a,i,s,h,23,4),s+4}o.prototype.writeFloatLE=function(i,s,h){return N(this,i,s,!0,h)},o.prototype.writeFloatBE=function(i,s,h){return N(this,i,s,!1,h)};function B(a,i,s,h,v){return i=+i,s=s>>>0,v||Ae(a,i,s,8),t.write(a,i,s,h,52,8),s+8}o.prototype.writeDoubleLE=function(i,s,h){return B(this,i,s,!0,h)},o.prototype.writeDoubleBE=function(i,s,h){return B(this,i,s,!1,h)},o.prototype.copy=function(i,s,h,v){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(h||(h=0),!v&&v!==0&&(v=this.length),s>=i.length&&(s=i.length),s||(s=0),v>0&&v<h&&(v=h),v===h||i.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),i.length-s<v-h&&(v=i.length-s+h);const O=v-h;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,h,v):Uint8Array.prototype.set.call(i,this.subarray(h,v),s),O},o.prototype.fill=function(i,s,h,v){if(typeof i=="string"){if(typeof s=="string"?(v=s,s=0,h=this.length):typeof h=="string"&&(v=h,h=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!o.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(i.length===1){const k=i.charCodeAt(0);(v==="utf8"&&k<128||v==="latin1")&&(i=k)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(s<0||this.length<s||this.length<h)throw new RangeError("Out of range index");if(h<=s)return this;s=s>>>0,h=h===void 0?this.length:h>>>0,i||(i=0);let O;if(typeof i=="number")for(O=s;O<h;++O)this[O]=i;else{const k=o.isBuffer(i)?i:o.from(i,v),H=k.length;if(H===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(O=0;O<h-s;++O)this[O+s]=k[O%H]}return this};const M={};function q(a,i,s){M[a]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}q("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),q("ERR_INVALID_ARG_TYPE",function(a,i){return`The "${a}" argument must be of type number. Received type ${typeof i}`},TypeError),q("ERR_OUT_OF_RANGE",function(a,i,s){let h=`The value of "${a}" is out of range.`,v=s;return Number.isInteger(s)&&Math.abs(s)>2**32?v=$(String(s)):typeof s=="bigint"&&(v=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(v=$(v)),v+="n"),h+=` It must be ${i}. Received ${v}`,h},RangeError);function $(a){let i="",s=a.length;const h=a[0]==="-"?1:0;for(;s>=h+4;s-=3)i=`_${a.slice(s-3,s)}${i}`;return`${a.slice(0,s)}${i}`}function d(a,i,s){L(i,"offset"),(a[i]===void 0||a[i+s]===void 0)&&U(i,a.length-(s+1))}function g(a,i,s,h,v,O){if(a>s||a<i){const k=typeof i=="bigint"?"n":"";let H;throw i===0||i===BigInt(0)?H=`>= 0${k} and < 2${k} ** ${(O+1)*8}${k}`:H=`>= -(2${k} ** ${(O+1)*8-1}${k}) and < 2 ** ${(O+1)*8-1}${k}`,new M.ERR_OUT_OF_RANGE("value",H,a)}d(h,v,O)}function L(a,i){if(typeof a!="number")throw new M.ERR_INVALID_ARG_TYPE(i,"number",a)}function U(a,i,s){throw Math.floor(a)!==a?(L(a,s),new M.ERR_OUT_OF_RANGE("offset","an integer",a)):i<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${i}`,a)}const z=/[^+/0-9A-Za-z-_]/g;function V(a){if(a=a.split("=")[0],a=a.trim().replace(z,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function K(a,i){i=i||1/0;let s;const h=a.length;let v=null;const O=[];for(let k=0;k<h;++k){if(s=a.charCodeAt(k),s>55295&&s<57344){if(!v){if(s>56319){(i-=3)>-1&&O.push(239,191,189);continue}else if(k+1===h){(i-=3)>-1&&O.push(239,191,189);continue}v=s;continue}if(s<56320){(i-=3)>-1&&O.push(239,191,189),v=s;continue}s=(v-55296<<10|s-56320)+65536}else v&&(i-=3)>-1&&O.push(239,191,189);if(v=null,s<128){if((i-=1)<0)break;O.push(s)}else if(s<2048){if((i-=2)<0)break;O.push(s>>6|192,s&63|128)}else if(s<65536){if((i-=3)<0)break;O.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((i-=4)<0)break;O.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return O}function me(a){const i=[];for(let s=0;s<a.length;++s)i.push(a.charCodeAt(s)&255);return i}function Be(a,i){let s,h,v;const O=[];for(let k=0;k<a.length&&!((i-=2)<0);++k)s=a.charCodeAt(k),h=s>>8,v=s%256,O.push(v),O.push(h);return O}function Pe(a){return e.toByteArray(V(a))}function Oe(a,i,s,h){let v;for(v=0;v<h&&!(v+s>=i.length||v>=a.length);++v)i[v+s]=a[v];return v}function se(a,i){return a instanceof i||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===i.name}function ve(a){return a!==a}const Me=function(){const a="0123456789abcdef",i=new Array(256);for(let s=0;s<16;++s){const h=s*16;for(let v=0;v<16;++v)i[h+v]=a[s]+a[v]}return i}();function oe(a){return typeof BigInt>"u"?Re:a}function Re(){throw new Error("BigInt not supported")}}(bt)),bt}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var xr;function vn(){return xr||(xr=1,function(r,e){var t=We(),n=t.Buffer;function l(f,o){for(var p in f)o[p]=f[p]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(l(t,e),e.Buffer=u);function u(f,o,p){return n(f,o,p)}u.prototype=Object.create(n.prototype),l(n,u),u.from=function(f,o,p){if(typeof f=="number")throw new TypeError("Argument must not be a number");return n(f,o,p)},u.alloc=function(f,o,p){if(typeof f!="number")throw new TypeError("Argument must be a number");var w=n(f);return o!==void 0?typeof p=="string"?w.fill(o,p):w.fill(o):w.fill(0),w},u.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return n(f)},u.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(f)}}(Je,Je.exports)),Je.exports}var Tr;function Ts(){if(Tr)return Ge.exports;Tr=1;var r=65536,e=4294967295;function t(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=vn().Buffer,l=ge.crypto||ge.msCrypto;l&&l.getRandomValues?Ge.exports=u:Ge.exports=t;function u(f,o){if(f>e)throw new RangeError("requested too many random bytes");var p=n.allocUnsafe(f);if(f>0)if(f>r)for(var w=0;w<f;w+=r)l.getRandomValues(p.slice(w,w+r));else l.getRandomValues(p);return typeof o=="function"?process.nextTick(function(){o(null,p)}):p}return Ge.exports}var Xe={exports:{}},Qe={exports:{}},Ar;function Rn(){if(Ar)return Qe.exports;Ar=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(R,A,P){return Function.prototype.apply.call(R,A,P)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:t=function(R){return Object.getOwnPropertyNames(R)};function n(x){console&&console.warn&&console.warn(x)}var l=Number.isNaN||function(R){return R!==R};function u(){u.init.call(this)}Qe.exports=u,Qe.exports.once=y,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var f=10;function o(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(x){if(typeof x!="number"||x<0||l(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");f=x}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||l(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function p(x){return x._maxListeners===void 0?u.defaultMaxListeners:x._maxListeners}u.prototype.getMaxListeners=function(){return p(this)},u.prototype.emit=function(R){for(var A=[],P=1;P<arguments.length;P++)A.push(arguments[P]);var F=R==="error",D=this._events;if(D!==void 0)F=F&&D.error===void 0;else if(!F)return!1;if(F){var j;if(A.length>0&&(j=A[0]),j instanceof Error)throw j;var re=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw re.context=j,re}var ue=D[R];if(ue===void 0)return!1;if(typeof ue=="function")e(ue,this,A);else for(var le=ue.length,ye=c(ue,le),P=0;P<le;++P)e(ye[P],this,A);return!0};function w(x,R,A,P){var F,D,j;if(o(A),D=x._events,D===void 0?(D=x._events=Object.create(null),x._eventsCount=0):(D.newListener!==void 0&&(x.emit("newListener",R,A.listener?A.listener:A),D=x._events),j=D[R]),j===void 0)j=D[R]=A,++x._eventsCount;else if(typeof j=="function"?j=D[R]=P?[A,j]:[j,A]:P?j.unshift(A):j.push(A),F=p(x),F>0&&j.length>F&&!j.warned){j.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=x,re.type=R,re.count=j.length,n(re)}return x}u.prototype.addListener=function(R,A){return w(this,R,A,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(R,A){return w(this,R,A,!0)};function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(x,R,A){var P={fired:!1,wrapFn:void 0,target:x,type:R,listener:A},F=E.bind(P);return F.listener=A,P.wrapFn=F,F}u.prototype.once=function(R,A){return o(A),this.on(R,_(this,R,A)),this},u.prototype.prependOnceListener=function(R,A){return o(A),this.prependListener(R,_(this,R,A)),this},u.prototype.removeListener=function(R,A){var P,F,D,j,re;if(o(A),F=this._events,F===void 0)return this;if(P=F[R],P===void 0)return this;if(P===A||P.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete F[R],F.removeListener&&this.emit("removeListener",R,P.listener||A));else if(typeof P!="function"){for(D=-1,j=P.length-1;j>=0;j--)if(P[j]===A||P[j].listener===A){re=P[j].listener,D=j;break}if(D<0)return this;D===0?P.shift():b(P,D),P.length===1&&(F[R]=P[0]),F.removeListener!==void 0&&this.emit("removeListener",R,re||A)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(R){var A,P,F;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[R]),this;if(arguments.length===0){var D=Object.keys(P),j;for(F=0;F<D.length;++F)j=D[F],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=P[R],typeof A=="function")this.removeListener(R,A);else if(A!==void 0)for(F=A.length-1;F>=0;F--)this.removeListener(R,A[F]);return this};function S(x,R,A){var P=x._events;if(P===void 0)return[];var F=P[R];return F===void 0?[]:typeof F=="function"?A?[F.listener||F]:[F]:A?m(F):c(F,F.length)}u.prototype.listeners=function(R){return S(this,R,!0)},u.prototype.rawListeners=function(R){return S(this,R,!1)},u.listenerCount=function(x,R){return typeof x.listenerCount=="function"?x.listenerCount(R):T.call(x,R)},u.prototype.listenerCount=T;function T(x){var R=this._events;if(R!==void 0){var A=R[x];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function c(x,R){for(var A=new Array(R),P=0;P<R;++P)A[P]=x[P];return A}function b(x,R){for(;R+1<x.length;R++)x[R]=x[R+1];x.pop()}function m(x){for(var R=new Array(x.length),A=0;A<R.length;++A)R[A]=x[A].listener||x[A];return R}function y(x,R){return new Promise(function(A,P){function F(j){x.removeListener(R,D),P(j)}function D(){typeof x.removeListener=="function"&&x.removeListener("error",F),A([].slice.call(arguments))}I(x,R,D,{once:!0}),R!=="error"&&C(x,F,{once:!0})})}function C(x,R,A){typeof x.on=="function"&&I(x,"error",R,A)}function I(x,R,A,P){if(typeof x.on=="function")P.once?x.once(R,A):x.on(R,A);else if(typeof x.addEventListener=="function")x.addEventListener(R,function F(D){P.once&&x.removeEventListener(R,F),A(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return Qe.exports}var Et,Br;function Cn(){return Br||(Br=1,Et=Rn().EventEmitter),Et}const As={},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"})),Sn=Fn(Bs);var vt,Or;function Os(){if(Or)return vt;Or=1;function r(c,b){var m=Object.keys(c);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(c);b&&(y=y.filter(function(C){return Object.getOwnPropertyDescriptor(c,C).enumerable})),m.push.apply(m,y)}return m}function e(c){for(var b=1;b<arguments.length;b++){var m=arguments[b]!=null?arguments[b]:{};b%2?r(Object(m),!0).forEach(function(y){t(c,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(y){Object.defineProperty(c,y,Object.getOwnPropertyDescriptor(m,y))})}return c}function t(c,b,m){return b=f(b),b in c?Object.defineProperty(c,b,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[b]=m,c}function n(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}function l(c,b){for(var m=0;m<b.length;m++){var y=b[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,f(y.key),y)}}function u(c,b,m){return l(c.prototype,b),Object.defineProperty(c,"prototype",{writable:!1}),c}function f(c){var b=o(c,"string");return typeof b=="symbol"?b:String(b)}function o(c,b){if(typeof c!="object"||c===null)return c;var m=c[Symbol.toPrimitive];if(m!==void 0){var y=m.call(c,b);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}var p=We(),w=p.Buffer,E=Sn,_=E.inspect,S=_&&_.custom||"inspect";function T(c,b,m){w.prototype.copy.call(c,b,m)}return vt=function(){function c(){n(this,c),this.head=null,this.tail=null,this.length=0}return u(c,[{key:"push",value:function(m){var y={data:m,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(m){var y={data:m,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var y=this.head,C=""+y.data;y=y.next;)C+=m+y.data;return C}},{key:"concat",value:function(m){if(this.length===0)return w.alloc(0);for(var y=w.allocUnsafe(m>>>0),C=this.head,I=0;C;)T(C.data,y,I),I+=C.data.length,C=C.next;return y}},{key:"consume",value:function(m,y){var C;return m<this.head.data.length?(C=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?C=this.shift():C=y?this._getString(m):this._getBuffer(m),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var y=this.head,C=1,I=y.data;for(m-=I.length;y=y.next;){var x=y.data,R=m>x.length?x.length:m;if(R===x.length?I+=x:I+=x.slice(0,m),m-=R,m===0){R===x.length?(++C,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=x.slice(R));break}++C}return this.length-=C,I}},{key:"_getBuffer",value:function(m){var y=w.allocUnsafe(m),C=this.head,I=1;for(C.data.copy(y),m-=C.data.length;C=C.next;){var x=C.data,R=m>x.length?x.length:m;if(x.copy(y,y.length-m,0,R),m-=R,m===0){R===x.length?(++I,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=x.slice(R));break}++I}return this.length-=I,y}},{key:S,value:function(m,y){return _(this,e(e({},y),{},{depth:0,customInspect:!1}))}}]),c}(),vt}var Rt,Nr;function xn(){if(Nr)return Rt;Nr=1;function r(f,o){var p=this,w=this._readableState&&this._readableState.destroyed,E=this._writableState&&this._writableState.destroyed;return w||E?(o?o(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(l,this,f)):process.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(_){!o&&_?p._writableState?p._writableState.errorEmitted?process.nextTick(t,p):(p._writableState.errorEmitted=!0,process.nextTick(e,p,_)):process.nextTick(e,p,_):o?(process.nextTick(t,p),o(_)):process.nextTick(t,p)}),this)}function e(f,o){l(f,o),t(f)}function t(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,o){f.emit("error",o)}function u(f,o){var p=f._readableState,w=f._writableState;p&&p.autoDestroy||w&&w.autoDestroy?f.destroy(o):f.emit("error",o)}return Rt={destroy:r,undestroy:n,errorOrDestroy:u},Rt}var Ct={},Ir;function Le(){if(Ir)return Ct;Ir=1;function r(o,p){o.prototype=Object.create(p.prototype),o.prototype.constructor=o,o.__proto__=p}var e={};function t(o,p,w){w||(w=Error);function E(S,T,c){return typeof p=="string"?p:p(S,T,c)}var _=function(S){r(T,S);function T(c,b,m){return S.call(this,E(c,b,m))||this}return T}(w);_.prototype.name=w.name,_.prototype.code=o,e[o]=_}function n(o,p){if(Array.isArray(o)){var w=o.length;return o=o.map(function(E){return String(E)}),w>2?"one of ".concat(p," ").concat(o.slice(0,w-1).join(", "),", or ")+o[w-1]:w===2?"one of ".concat(p," ").concat(o[0]," or ").concat(o[1]):"of ".concat(p," ").concat(o[0])}else return"of ".concat(p," ").concat(String(o))}function l(o,p,w){return o.substr(0,p.length)===p}function u(o,p,w){return(w===void 0||w>o.length)&&(w=o.length),o.substring(w-p.length,w)===p}function f(o,p,w){return typeof w!="number"&&(w=0),w+p.length>o.length?!1:o.indexOf(p,w)!==-1}return t("ERR_INVALID_OPT_VALUE",function(o,p){return'The value "'+p+'" is invalid for option "'+o+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(o,p,w){var E;typeof p=="string"&&l(p,"not ")?(E="must not be",p=p.replace(/^not /,"")):E="must be";var _;if(u(o," argument"))_="The ".concat(o," ").concat(E," ").concat(n(p,"type"));else{var S=f(o,".")?"property":"argument";_='The "'.concat(o,'" ').concat(S," ").concat(E," ").concat(n(p,"type"))}return _+=". Received type ".concat(typeof w),_},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ct.codes=e,Ct}var St,kr;function Tn(){if(kr)return St;kr=1;var r=Le().codes.ERR_INVALID_OPT_VALUE;function e(n,l,u){return n.highWaterMark!=null?n.highWaterMark:l?n[u]:null}function t(n,l,u,f){var o=e(l,f,u);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var p=f?u:"highWaterMark";throw new r(p,o)}return Math.floor(o)}return n.objectMode?16:16*1024}return St={getHighWaterMark:t},St}var Ze={exports:{}},Lr;function $e(){return Lr||(Lr=1,typeof Object.create=="function"?Ze.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ze.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Ze.exports}var xt,Fr;function Ns(){if(Fr)return xt;Fr=1,xt=r;function r(t,n){if(e("noDeprecation"))return t;var l=!1;function u(){if(!l){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),l=!0}return t.apply(this,arguments)}return u}function e(t){try{if(!ge.localStorage)return!1}catch{return!1}var n=ge.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return xt}var Tt,Pr;function An(){if(Pr)return Tt;Pr=1,Tt=F;function r(N){var B=this;this.next=null,this.entry=null,this.finish=function(){Ae(B,N)}}var e;F.WritableState=A;var t={deprecate:Ns()},n=Cn(),l=We().Buffer,u=(typeof ge<"u"?ge:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(N){return l.from(N)}function o(N){return l.isBuffer(N)||N instanceof u}var p=xn(),w=Tn(),E=w.getHighWaterMark,_=Le().codes,S=_.ERR_INVALID_ARG_TYPE,T=_.ERR_METHOD_NOT_IMPLEMENTED,c=_.ERR_MULTIPLE_CALLBACK,b=_.ERR_STREAM_CANNOT_PIPE,m=_.ERR_STREAM_DESTROYED,y=_.ERR_STREAM_NULL_VALUES,C=_.ERR_STREAM_WRITE_AFTER_END,I=_.ERR_UNKNOWN_ENCODING,x=p.errorOrDestroy;$e()(F,n);function R(){}function A(N,B,M){e=e||Ie(),N=N||{},typeof M!="boolean"&&(M=B instanceof e),this.objectMode=!!N.objectMode,M&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=E(this,N,"writableHighWaterMark",M),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=N.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($){Fe(B,$)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}A.prototype.getBuffer=function(){for(var B=this.bufferedRequest,M=[];B;)M.push(B),B=B.next;return M},function(){try{Object.defineProperty(A.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var P;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(B){return P.call(this,B)?!0:this!==F?!1:B&&B._writableState instanceof A}})):P=function(B){return B instanceof this};function F(N){e=e||Ie();var B=this instanceof e;if(!B&&!P.call(F,this))return new F(N);this._writableState=new A(N,this,B),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),n.call(this)}F.prototype.pipe=function(){x(this,new b)};function D(N,B){var M=new C;x(N,M),process.nextTick(B,M)}function j(N,B,M,q){var $;return M===null?$=new y:typeof M!="string"&&!B.objectMode&&($=new S("chunk",["string","Buffer"],M)),$?(x(N,$),process.nextTick(q,$),!1):!0}F.prototype.write=function(N,B,M){var q=this._writableState,$=!1,d=!q.objectMode&&o(N);return d&&!l.isBuffer(N)&&(N=f(N)),typeof B=="function"&&(M=B,B=null),d?B="buffer":B||(B=q.defaultEncoding),typeof M!="function"&&(M=R),q.ending?D(this,M):(d||j(this,q,N,M))&&(q.pendingcb++,$=ue(this,q,d,N,B,M)),$},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,!N.writing&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&_e(this,N))},F.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new I(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function re(N,B,M){return!N.objectMode&&N.decodeStrings!==!1&&typeof B=="string"&&(B=l.from(B,M)),B}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ue(N,B,M,q,$,d){if(!M){var g=re(B,q,$);q!==g&&(M=!0,$="buffer",q=g)}var L=B.objectMode?1:q.length;B.length+=L;var U=B.length<B.highWaterMark;if(U||(B.needDrain=!0),B.writing||B.corked){var z=B.lastBufferedRequest;B.lastBufferedRequest={chunk:q,encoding:$,isBuf:M,callback:d,next:null},z?z.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else le(N,B,!1,L,q,$,d);return U}function le(N,B,M,q,$,d,g){B.writelen=q,B.writecb=g,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new m("write")):M?N._writev($,B.onwrite):N._write($,d,B.onwrite),B.sync=!1}function ye(N,B,M,q,$){--B.pendingcb,M?(process.nextTick($,q),process.nextTick(fe,N,B),N._writableState.errorEmitted=!0,x(N,q)):($(q),N._writableState.errorEmitted=!0,x(N,q),fe(N,B))}function Ee(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}function Fe(N,B){var M=N._writableState,q=M.sync,$=M.writecb;if(typeof $!="function")throw new c;if(Ee(M),B)ye(N,M,q,B,$);else{var d=xe(M)||N.destroyed;!d&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&_e(N,M),q?process.nextTick(pe,N,M,d,$):pe(N,M,d,$)}}function pe(N,B,M,q){M||Se(N,B),B.pendingcb--,q(),fe(N,B)}function Se(N,B){B.length===0&&B.needDrain&&(B.needDrain=!1,N.emit("drain"))}function _e(N,B){B.bufferProcessing=!0;var M=B.bufferedRequest;if(N._writev&&M&&M.next){var q=B.bufferedRequestCount,$=new Array(q),d=B.corkedRequestsFree;d.entry=M;for(var g=0,L=!0;M;)$[g]=M,M.isBuf||(L=!1),M=M.next,g+=1;$.allBuffers=L,le(N,B,!0,B.length,$,"",d.finish),B.pendingcb++,B.lastBufferedRequest=null,d.next?(B.corkedRequestsFree=d.next,d.next=null):B.corkedRequestsFree=new r(B),B.bufferedRequestCount=0}else{for(;M;){var U=M.chunk,z=M.encoding,V=M.callback,K=B.objectMode?1:U.length;if(le(N,B,!1,K,U,z,V),M=M.next,B.bufferedRequestCount--,B.writing)break}M===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=M,B.bufferProcessing=!1}F.prototype._write=function(N,B,M){M(new T("_write()"))},F.prototype._writev=null,F.prototype.end=function(N,B,M){var q=this._writableState;return typeof N=="function"?(M=N,N=null,B=null):typeof B=="function"&&(M=B,B=null),N!=null&&this.write(N,B),q.corked&&(q.corked=1,this.uncork()),q.ending||Te(this,q,M),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function xe(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function Q(N,B){N._final(function(M){B.pendingcb--,M&&x(N,M),B.prefinished=!0,N.emit("prefinish"),fe(N,B)})}function ne(N,B){!B.prefinished&&!B.finalCalled&&(typeof N._final=="function"&&!B.destroyed?(B.pendingcb++,B.finalCalled=!0,process.nextTick(Q,N,B)):(B.prefinished=!0,N.emit("prefinish")))}function fe(N,B){var M=xe(B);if(M&&(ne(N,B),B.pendingcb===0&&(B.finished=!0,N.emit("finish"),B.autoDestroy))){var q=N._readableState;(!q||q.autoDestroy&&q.endEmitted)&&N.destroy()}return M}function Te(N,B,M){B.ending=!0,fe(N,B),M&&(B.finished?process.nextTick(M):N.once("finish",M)),B.ended=!0,N.writable=!1}function Ae(N,B,M){var q=N.entry;for(N.entry=null;q;){var $=q.callback;B.pendingcb--,$(M),q=q.next}B.corkedRequestsFree.next=N}return Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),F.prototype.destroy=p.destroy,F.prototype._undestroy=p.undestroy,F.prototype._destroy=function(N,B){B(N)},Tt}var At,Mr;function Ie(){if(Mr)return At;Mr=1;var r=Object.keys||function(w){var E=[];for(var _ in w)E.push(_);return E};At=f;var e=Bn(),t=An();$e()(f,e);for(var n=r(t.prototype),l=0;l<n.length;l++){var u=n[l];f.prototype[u]||(f.prototype[u]=t.prototype[u])}function f(w){if(!(this instanceof f))return new f(w);e.call(this,w),t.call(this,w),this.allowHalfOpen=!0,w&&(w.readable===!1&&(this.readable=!1),w.writable===!1&&(this.writable=!1),w.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||process.nextTick(p,this)}function p(w){w.end()}return Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(E){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=E,this._writableState.destroyed=E)}}),At}var Bt={},Dr;function Ur(){if(Dr)return Bt;Dr=1;var r=vn().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var C;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(C)return;y=(""+y).toLowerCase(),C=!0}}function n(y){var C=t(y);if(typeof C!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return C||y}Bt.StringDecoder=l;function l(y){this.encoding=n(y);var C;switch(this.encoding){case"utf16le":this.text=_,this.end=S,C=4;break;case"utf8":this.fillLast=p,C=4;break;case"base64":this.text=T,this.end=c,C=3;break;default:this.write=b,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(C)}l.prototype.write=function(y){if(y.length===0)return"";var C,I;if(this.lastNeed){if(C=this.fillLast(y),C===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<y.length?C?C+this.text(y,I):this.text(y,I):C||""},l.prototype.end=E,l.prototype.text=w,l.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function u(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function f(y,C,I){var x=C.length-1;if(x<I)return 0;var R=u(C[x]);return R>=0?(R>0&&(y.lastNeed=R-1),R):--x<I||R===-2?0:(R=u(C[x]),R>=0?(R>0&&(y.lastNeed=R-2),R):--x<I||R===-2?0:(R=u(C[x]),R>=0?(R>0&&(R===2?R=0:y.lastNeed=R-3),R):0))}function o(y,C,I){if((C[0]&192)!==128)return y.lastNeed=0,"�";if(y.lastNeed>1&&C.length>1){if((C[1]&192)!==128)return y.lastNeed=1,"�";if(y.lastNeed>2&&C.length>2&&(C[2]&192)!==128)return y.lastNeed=2,"�"}}function p(y){var C=this.lastTotal-this.lastNeed,I=o(this,y);if(I!==void 0)return I;if(this.lastNeed<=y.length)return y.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,C,0,y.length),this.lastNeed-=y.length}function w(y,C){var I=f(this,y,C);if(!this.lastNeed)return y.toString("utf8",C);this.lastTotal=I;var x=y.length-(I-this.lastNeed);return y.copy(this.lastChar,0,x),y.toString("utf8",C,x)}function E(y){var C=y&&y.length?this.write(y):"";return this.lastNeed?C+"�":C}function _(y,C){if((y.length-C)%2===0){var I=y.toString("utf16le",C);if(I){var x=I.charCodeAt(I.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",C,y.length-1)}function S(y){var C=y&&y.length?this.write(y):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,I)}return C}function T(y,C){var I=(y.length-C)%3;return I===0?y.toString("base64",C):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",C,y.length-I))}function c(y){var C=y&&y.length?this.write(y):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function b(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return Bt}var Ot,qr;function tr(){if(qr)return Ot;qr=1;var r=Le().codes.ERR_STREAM_PREMATURE_CLOSE;function e(u){var f=!1;return function(){if(!f){f=!0;for(var o=arguments.length,p=new Array(o),w=0;w<o;w++)p[w]=arguments[w];u.apply(this,p)}}}function t(){}function n(u){return u.setHeader&&typeof u.abort=="function"}function l(u,f,o){if(typeof f=="function")return l(u,null,f);f||(f={}),o=e(o||t);var p=f.readable||f.readable!==!1&&u.readable,w=f.writable||f.writable!==!1&&u.writable,E=function(){u.writable||S()},_=u._writableState&&u._writableState.finished,S=function(){w=!1,_=!0,p||o.call(u)},T=u._readableState&&u._readableState.endEmitted,c=function(){p=!1,T=!0,w||o.call(u)},b=function(I){o.call(u,I)},m=function(){var I;if(p&&!T)return(!u._readableState||!u._readableState.ended)&&(I=new r),o.call(u,I);if(w&&!_)return(!u._writableState||!u._writableState.ended)&&(I=new r),o.call(u,I)},y=function(){u.req.on("finish",S)};return n(u)?(u.on("complete",S),u.on("abort",m),u.req?y():u.on("request",y)):w&&!u._writableState&&(u.on("end",E),u.on("close",E)),u.on("end",c),u.on("finish",S),f.error!==!1&&u.on("error",b),u.on("close",m),function(){u.removeListener("complete",S),u.removeListener("abort",m),u.removeListener("request",y),u.req&&u.req.removeListener("finish",S),u.removeListener("end",E),u.removeListener("close",E),u.removeListener("finish",S),u.removeListener("end",c),u.removeListener("error",b),u.removeListener("close",m)}}return Ot=l,Ot}var Nt,jr;function Is(){if(jr)return Nt;jr=1;var r;function e(I,x,R){return x=t(x),x in I?Object.defineProperty(I,x,{value:R,enumerable:!0,configurable:!0,writable:!0}):I[x]=R,I}function t(I){var x=n(I,"string");return typeof x=="symbol"?x:String(x)}function n(I,x){if(typeof I!="object"||I===null)return I;var R=I[Symbol.toPrimitive];if(R!==void 0){var A=R.call(I,x||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(I)}var l=tr(),u=Symbol("lastResolve"),f=Symbol("lastReject"),o=Symbol("error"),p=Symbol("ended"),w=Symbol("lastPromise"),E=Symbol("handlePromise"),_=Symbol("stream");function S(I,x){return{value:I,done:x}}function T(I){var x=I[u];if(x!==null){var R=I[_].read();R!==null&&(I[w]=null,I[u]=null,I[f]=null,x(S(R,!1)))}}function c(I){process.nextTick(T,I)}function b(I,x){return function(R,A){I.then(function(){if(x[p]){R(S(void 0,!0));return}x[E](R,A)},A)}}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((r={get stream(){return this[_]},next:function(){var x=this,R=this[o];if(R!==null)return Promise.reject(R);if(this[p])return Promise.resolve(S(void 0,!0));if(this[_].destroyed)return new Promise(function(D,j){process.nextTick(function(){x[o]?j(x[o]):D(S(void 0,!0))})});var A=this[w],P;if(A)P=new Promise(b(A,this));else{var F=this[_].read();if(F!==null)return Promise.resolve(S(F,!1));P=new Promise(this[E])}return this[w]=P,P}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var x=this;return new Promise(function(R,A){x[_].destroy(null,function(P){if(P){A(P);return}R(S(void 0,!0))})})}),r),m),C=function(x){var R,A=Object.create(y,(R={},e(R,_,{value:x,writable:!0}),e(R,u,{value:null,writable:!0}),e(R,f,{value:null,writable:!0}),e(R,o,{value:null,writable:!0}),e(R,p,{value:x._readableState.endEmitted,writable:!0}),e(R,E,{value:function(F,D){var j=A[_].read();j?(A[w]=null,A[u]=null,A[f]=null,F(S(j,!1))):(A[u]=F,A[f]=D)},writable:!0}),R));return A[w]=null,l(x,function(P){if(P&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=A[f];F!==null&&(A[w]=null,A[u]=null,A[f]=null,F(P)),A[o]=P;return}var D=A[u];D!==null&&(A[w]=null,A[u]=null,A[f]=null,D(S(void 0,!0))),A[p]=!0}),x.on("readable",c.bind(null,A)),A};return Nt=C,Nt}var It,Wr;function ks(){return Wr||(Wr=1,It=function(){throw new Error("Readable.from is not available in the browser")}),It}var kt,$r;function Bn(){if($r)return kt;$r=1,kt=D;var r;D.ReadableState=F,Rn().EventEmitter;var e=function(g,L){return g.listeners(L).length},t=Cn(),n=We().Buffer,l=(typeof ge<"u"?ge:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(d){return n.from(d)}function f(d){return n.isBuffer(d)||d instanceof l}var o=Sn,p;o&&o.debuglog?p=o.debuglog("stream"):p=function(){};var w=Os(),E=xn(),_=Tn(),S=_.getHighWaterMark,T=Le().codes,c=T.ERR_INVALID_ARG_TYPE,b=T.ERR_STREAM_PUSH_AFTER_EOF,m=T.ERR_METHOD_NOT_IMPLEMENTED,y=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,C,I,x;$e()(D,t);var R=E.errorOrDestroy,A=["error","close","destroy","pause","resume"];function P(d,g,L){if(typeof d.prependListener=="function")return d.prependListener(g,L);!d._events||!d._events[g]?d.on(g,L):Array.isArray(d._events[g])?d._events[g].unshift(L):d._events[g]=[L,d._events[g]]}function F(d,g,L){r=r||Ie(),d=d||{},typeof L!="boolean"&&(L=g instanceof r),this.objectMode=!!d.objectMode,L&&(this.objectMode=this.objectMode||!!d.readableObjectMode),this.highWaterMark=S(this,d,"readableHighWaterMark",L),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=d.emitClose!==!1,this.autoDestroy=!!d.autoDestroy,this.destroyed=!1,this.defaultEncoding=d.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,d.encoding&&(C||(C=Ur().StringDecoder),this.decoder=new C(d.encoding),this.encoding=d.encoding)}function D(d){if(r=r||Ie(),!(this instanceof D))return new D(d);var g=this instanceof r;this._readableState=new F(d,this,g),this.readable=!0,d&&(typeof d.read=="function"&&(this._read=d.read),typeof d.destroy=="function"&&(this._destroy=d.destroy)),t.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(g){this._readableState&&(this._readableState.destroyed=g)}}),D.prototype.destroy=E.destroy,D.prototype._undestroy=E.undestroy,D.prototype._destroy=function(d,g){g(d)},D.prototype.push=function(d,g){var L=this._readableState,U;return L.objectMode?U=!0:typeof d=="string"&&(g=g||L.defaultEncoding,g!==L.encoding&&(d=n.from(d,g),g=""),U=!0),j(this,d,g,!1,U)},D.prototype.unshift=function(d){return j(this,d,null,!0,!1)};function j(d,g,L,U,z){p("readableAddChunk",g);var V=d._readableState;if(g===null)V.reading=!1,Fe(d,V);else{var K;if(z||(K=ue(V,g)),K)R(d,K);else if(V.objectMode||g&&g.length>0)if(typeof g!="string"&&!V.objectMode&&Object.getPrototypeOf(g)!==n.prototype&&(g=u(g)),U)V.endEmitted?R(d,new y):re(d,V,g,!0);else if(V.ended)R(d,new b);else{if(V.destroyed)return!1;V.reading=!1,V.decoder&&!L?(g=V.decoder.write(g),V.objectMode||g.length!==0?re(d,V,g,!1):_e(d,V)):re(d,V,g,!1)}else U||(V.reading=!1,_e(d,V))}return!V.ended&&(V.length<V.highWaterMark||V.length===0)}function re(d,g,L,U){g.flowing&&g.length===0&&!g.sync?(g.awaitDrain=0,d.emit("data",L)):(g.length+=g.objectMode?1:L.length,U?g.buffer.unshift(L):g.buffer.push(L),g.needReadable&&pe(d)),_e(d,g)}function ue(d,g){var L;return!f(g)&&typeof g!="string"&&g!==void 0&&!d.objectMode&&(L=new c("chunk",["string","Buffer","Uint8Array"],g)),L}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(d){C||(C=Ur().StringDecoder);var g=new C(d);this._readableState.decoder=g,this._readableState.encoding=this._readableState.decoder.encoding;for(var L=this._readableState.buffer.head,U="";L!==null;)U+=g.write(L.data),L=L.next;return this._readableState.buffer.clear(),U!==""&&this._readableState.buffer.push(U),this._readableState.length=U.length,this};var le=1073741824;function ye(d){return d>=le?d=le:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++),d}function Ee(d,g){return d<=0||g.length===0&&g.ended?0:g.objectMode?1:d!==d?g.flowing&&g.length?g.buffer.head.data.length:g.length:(d>g.highWaterMark&&(g.highWaterMark=ye(d)),d<=g.length?d:g.ended?g.length:(g.needReadable=!0,0))}D.prototype.read=function(d){p("read",d),d=parseInt(d,10);var g=this._readableState,L=d;if(d!==0&&(g.emittedReadable=!1),d===0&&g.needReadable&&((g.highWaterMark!==0?g.length>=g.highWaterMark:g.length>0)||g.ended))return p("read: emitReadable",g.length,g.ended),g.length===0&&g.ended?M(this):pe(this),null;if(d=Ee(d,g),d===0&&g.ended)return g.length===0&&M(this),null;var U=g.needReadable;p("need readable",U),(g.length===0||g.length-d<g.highWaterMark)&&(U=!0,p("length less than watermark",U)),g.ended||g.reading?(U=!1,p("reading or ended",U)):U&&(p("do read"),g.reading=!0,g.sync=!0,g.length===0&&(g.needReadable=!0),this._read(g.highWaterMark),g.sync=!1,g.reading||(d=Ee(L,g)));var z;return d>0?z=B(d,g):z=null,z===null?(g.needReadable=g.length<=g.highWaterMark,d=0):(g.length-=d,g.awaitDrain=0),g.length===0&&(g.ended||(g.needReadable=!0),L!==d&&g.ended&&M(this)),z!==null&&this.emit("data",z),z};function Fe(d,g){if(p("onEofChunk"),!g.ended){if(g.decoder){var L=g.decoder.end();L&&L.length&&(g.buffer.push(L),g.length+=g.objectMode?1:L.length)}g.ended=!0,g.sync?pe(d):(g.needReadable=!1,g.emittedReadable||(g.emittedReadable=!0,Se(d)))}}function pe(d){var g=d._readableState;p("emitReadable",g.needReadable,g.emittedReadable),g.needReadable=!1,g.emittedReadable||(p("emitReadable",g.flowing),g.emittedReadable=!0,process.nextTick(Se,d))}function Se(d){var g=d._readableState;p("emitReadable_",g.destroyed,g.length,g.ended),!g.destroyed&&(g.length||g.ended)&&(d.emit("readable"),g.emittedReadable=!1),g.needReadable=!g.flowing&&!g.ended&&g.length<=g.highWaterMark,N(d)}function _e(d,g){g.readingMore||(g.readingMore=!0,process.nextTick(xe,d,g))}function xe(d,g){for(;!g.reading&&!g.ended&&(g.length<g.highWaterMark||g.flowing&&g.length===0);){var L=g.length;if(p("maybeReadMore read 0"),d.read(0),L===g.length)break}g.readingMore=!1}D.prototype._read=function(d){R(this,new m("_read()"))},D.prototype.pipe=function(d,g){var L=this,U=this._readableState;switch(U.pipesCount){case 0:U.pipes=d;break;case 1:U.pipes=[U.pipes,d];break;default:U.pipes.push(d);break}U.pipesCount+=1,p("pipe count=%d opts=%j",U.pipesCount,g);var z=(!g||g.end!==!1)&&d!==process.stdout&&d!==process.stderr,V=z?me:Re;U.endEmitted?process.nextTick(V):L.once("end",V),d.on("unpipe",K);function K(a,i){p("onunpipe"),a===L&&i&&i.hasUnpiped===!1&&(i.hasUnpiped=!0,Oe())}function me(){p("onend"),d.end()}var Be=Q(L);d.on("drain",Be);var Pe=!1;function Oe(){p("cleanup"),d.removeListener("close",Me),d.removeListener("finish",oe),d.removeListener("drain",Be),d.removeListener("error",ve),d.removeListener("unpipe",K),L.removeListener("end",me),L.removeListener("end",Re),L.removeListener("data",se),Pe=!0,U.awaitDrain&&(!d._writableState||d._writableState.needDrain)&&Be()}L.on("data",se);function se(a){p("ondata");var i=d.write(a);p("dest.write",i),i===!1&&((U.pipesCount===1&&U.pipes===d||U.pipesCount>1&&$(U.pipes,d)!==-1)&&!Pe&&(p("false write response, pause",U.awaitDrain),U.awaitDrain++),L.pause())}function ve(a){p("onerror",a),Re(),d.removeListener("error",ve),e(d,"error")===0&&R(d,a)}P(d,"error",ve);function Me(){d.removeListener("finish",oe),Re()}d.once("close",Me);function oe(){p("onfinish"),d.removeListener("close",Me),Re()}d.once("finish",oe);function Re(){p("unpipe"),L.unpipe(d)}return d.emit("pipe",L),U.flowing||(p("pipe resume"),L.resume()),d};function Q(d){return function(){var L=d._readableState;p("pipeOnDrain",L.awaitDrain),L.awaitDrain&&L.awaitDrain--,L.awaitDrain===0&&e(d,"data")&&(L.flowing=!0,N(d))}}D.prototype.unpipe=function(d){var g=this._readableState,L={hasUnpiped:!1};if(g.pipesCount===0)return this;if(g.pipesCount===1)return d&&d!==g.pipes?this:(d||(d=g.pipes),g.pipes=null,g.pipesCount=0,g.flowing=!1,d&&d.emit("unpipe",this,L),this);if(!d){var U=g.pipes,z=g.pipesCount;g.pipes=null,g.pipesCount=0,g.flowing=!1;for(var V=0;V<z;V++)U[V].emit("unpipe",this,{hasUnpiped:!1});return this}var K=$(g.pipes,d);return K===-1?this:(g.pipes.splice(K,1),g.pipesCount-=1,g.pipesCount===1&&(g.pipes=g.pipes[0]),d.emit("unpipe",this,L),this)},D.prototype.on=function(d,g){var L=t.prototype.on.call(this,d,g),U=this._readableState;return d==="data"?(U.readableListening=this.listenerCount("readable")>0,U.flowing!==!1&&this.resume()):d==="readable"&&!U.endEmitted&&!U.readableListening&&(U.readableListening=U.needReadable=!0,U.flowing=!1,U.emittedReadable=!1,p("on readable",U.length,U.reading),U.length?pe(this):U.reading||process.nextTick(fe,this)),L},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(d,g){var L=t.prototype.removeListener.call(this,d,g);return d==="readable"&&process.nextTick(ne,this),L},D.prototype.removeAllListeners=function(d){var g=t.prototype.removeAllListeners.apply(this,arguments);return(d==="readable"||d===void 0)&&process.nextTick(ne,this),g};function ne(d){var g=d._readableState;g.readableListening=d.listenerCount("readable")>0,g.resumeScheduled&&!g.paused?g.flowing=!0:d.listenerCount("data")>0&&d.resume()}function fe(d){p("readable nexttick read 0"),d.read(0)}D.prototype.resume=function(){var d=this._readableState;return d.flowing||(p("resume"),d.flowing=!d.readableListening,Te(this,d)),d.paused=!1,this};function Te(d,g){g.resumeScheduled||(g.resumeScheduled=!0,process.nextTick(Ae,d,g))}function Ae(d,g){p("resume",g.reading),g.reading||d.read(0),g.resumeScheduled=!1,d.emit("resume"),N(d),g.flowing&&!g.reading&&d.read(0)}D.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function N(d){var g=d._readableState;for(p("flow",g.flowing);g.flowing&&d.read()!==null;);}D.prototype.wrap=function(d){var g=this,L=this._readableState,U=!1;d.on("end",function(){if(p("wrapped end"),L.decoder&&!L.ended){var K=L.decoder.end();K&&K.length&&g.push(K)}g.push(null)}),d.on("data",function(K){if(p("wrapped data"),L.decoder&&(K=L.decoder.write(K)),!(L.objectMode&&K==null)&&!(!L.objectMode&&(!K||!K.length))){var me=g.push(K);me||(U=!0,d.pause())}});for(var z in d)this[z]===void 0&&typeof d[z]=="function"&&(this[z]=function(me){return function(){return d[me].apply(d,arguments)}}(z));for(var V=0;V<A.length;V++)d.on(A[V],this.emit.bind(this,A[V]));return this._read=function(K){p("wrapped _read",K),U&&(U=!1,d.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return I===void 0&&(I=Is()),I(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}}),D._fromList=B,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function B(d,g){if(g.length===0)return null;var L;return g.objectMode?L=g.buffer.shift():!d||d>=g.length?(g.decoder?L=g.buffer.join(""):g.buffer.length===1?L=g.buffer.first():L=g.buffer.concat(g.length),g.buffer.clear()):L=g.buffer.consume(d,g.decoder),L}function M(d){var g=d._readableState;p("endReadable",g.endEmitted),g.endEmitted||(g.ended=!0,process.nextTick(q,g,d))}function q(d,g){if(p("endReadableNT",d.endEmitted,d.length),!d.endEmitted&&d.length===0&&(d.endEmitted=!0,g.readable=!1,g.emit("end"),d.autoDestroy)){var L=g._writableState;(!L||L.autoDestroy&&L.finished)&&g.destroy()}}typeof Symbol=="function"&&(D.from=function(d,g){return x===void 0&&(x=ks()),x(D,d,g)});function $(d,g){for(var L=0,U=d.length;L<U;L++)if(d[L]===g)return L;return-1}return kt}var Lt,Vr;function On(){if(Vr)return Lt;Vr=1,Lt=o;var r=Le().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,u=Ie();$e()(o,u);function f(E,_){var S=this._transformState;S.transforming=!1;var T=S.writecb;if(T===null)return this.emit("error",new t);S.writechunk=null,S.writecb=null,_!=null&&this.push(_),T(E);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function o(E){if(!(this instanceof o))return new o(E);u.call(this,E),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,E&&(typeof E.transform=="function"&&(this._transform=E.transform),typeof E.flush=="function"&&(this._flush=E.flush)),this.on("prefinish",p)}function p(){var E=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(_,S){w(E,_,S)}):w(this,null,null)}o.prototype.push=function(E,_){return this._transformState.needTransform=!1,u.prototype.push.call(this,E,_)},o.prototype._transform=function(E,_,S){S(new e("_transform()"))},o.prototype._write=function(E,_,S){var T=this._transformState;if(T.writecb=S,T.writechunk=E,T.writeencoding=_,!T.transforming){var c=this._readableState;(T.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},o.prototype._read=function(E){var _=this._transformState;_.writechunk!==null&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0},o.prototype._destroy=function(E,_){u.prototype._destroy.call(this,E,function(S){_(S)})};function w(E,_,S){if(_)return E.emit("error",_);if(S!=null&&E.push(S),E._writableState.length)throw new l;if(E._transformState.transforming)throw new n;return E.push(null)}return Lt}var Ft,Hr;function Ls(){if(Hr)return Ft;Hr=1,Ft=e;var r=On();$e()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,l){l(null,t)},Ft}var Pt,Yr;function Fs(){if(Yr)return Pt;Yr=1;var r;function e(S){var T=!1;return function(){T||(T=!0,S.apply(void 0,arguments))}}var t=Le().codes,n=t.ERR_MISSING_ARGS,l=t.ERR_STREAM_DESTROYED;function u(S){if(S)throw S}function f(S){return S.setHeader&&typeof S.abort=="function"}function o(S,T,c,b){b=e(b);var m=!1;S.on("close",function(){m=!0}),r===void 0&&(r=tr()),r(S,{readable:T,writable:c},function(C){if(C)return b(C);m=!0,b()});var y=!1;return function(C){if(!m&&!y){if(y=!0,f(S))return S.abort();if(typeof S.destroy=="function")return S.destroy();b(C||new l("pipe"))}}}function p(S){S()}function w(S,T){return S.pipe(T)}function E(S){return!S.length||typeof S[S.length-1]!="function"?u:S.pop()}function _(){for(var S=arguments.length,T=new Array(S),c=0;c<S;c++)T[c]=arguments[c];var b=E(T);if(Array.isArray(T[0])&&(T=T[0]),T.length<2)throw new n("streams");var m,y=T.map(function(C,I){var x=I<T.length-1,R=I>0;return o(C,x,R,function(A){m||(m=A),A&&y.forEach(p),!x&&(y.forEach(p),b(m))})});return T.reduce(w)}return Pt=_,Pt}var Kr;function Ps(){return Kr||(Kr=1,function(r,e){e=r.exports=Bn(),e.Stream=e,e.Readable=e,e.Writable=An(),e.Duplex=Ie(),e.Transform=On(),e.PassThrough=Ls(),e.finished=tr(),e.pipeline=Fs()}(Xe,Xe.exports)),Xe.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Mt,Gr;function Ms(){if(Gr)return Mt;Gr=1;let r;return Mt=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ge):e=>(r||(r=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),Mt}var Dt,Jr;function Ds(){if(Jr)return Dt;Jr=1;function r(t,n){for(const l in n)Object.defineProperty(t,l,{value:n[l],enumerable:!0,configurable:!0});return t}function e(t,n,l){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");l||(l={}),typeof n=="object"&&(l=n,n=""),n&&(l.code=n);try{return r(t,l)}catch{l.message=t.message,l.stack=t.stack;const f=function(){};return f.prototype=Object.create(Object.getPrototypeOf(t)),r(new f,l)}}return Dt=e,Dt}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ut,zr;function Us(){if(zr)return Ut;zr=1;const r=Rs()("simple-peer"),e=Cs(),t=Ts(),n=Ps(),l=Ms(),u=Ds(),{Buffer:f}=We(),o=64*1024,p=5*1e3,w=5*1e3;function E(T){return T.replace(/a=ice-options:trickle\s\n/g,"")}function _(T){console.warn(T)}class S extends n.Duplex{constructor(c){if(c=Object.assign({allowHalfOpen:!1},c),super(c),this._id=t(4).toString("hex").slice(0,7),this._debug("new peer %o",c),this.channelName=c.initiator?c.channelName||t(20).toString("hex"):null,this.initiator=c.initiator||!1,this.channelConfig=c.channelConfig||S.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},S.config,c.config),this.offerOptions=c.offerOptions||{},this.answerOptions=c.answerOptions||{},this.sdpTransform=c.sdpTransform||(b=>b),this.streams=c.streams||(c.stream?[c.stream]:[]),this.trickle=c.trickle!==void 0?c.trickle:!0,this.allowHalfTrickle=c.allowHalfTrickle!==void 0?c.allowHalfTrickle:!1,this.iceCompleteTimeout=c.iceCompleteTimeout||p,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=c.wrtc&&typeof c.wrtc=="object"?c.wrtc:e(),!this._wrtc)throw u(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(b){this.destroy(u(b,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=b=>{this._onIceCandidate(b)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(b=>{this.destroy(u(b,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=b=>{this._setupData(b)},this.streams&&this.streams.forEach(b=>{this.addStream(b)}),this._pc.ontrack=b=>{this._onTrack(b)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(c){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof c=="string")try{c=JSON.parse(c)}catch{c={}}this._debug("signal()"),c.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),c.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(c.transceiverRequest.kind,c.transceiverRequest.init)),c.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(c.candidate):this._pendingCandidates.push(c.candidate)),c.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(c)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(b=>{this._addIceCandidate(b)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(b=>{this.destroy(u(b,"ERR_SET_REMOTE_DESCRIPTION"))}),!c.sdp&&!c.candidate&&!c.renegotiate&&!c.transceiverRequest&&this.destroy(u(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(c){const b=new this._wrtc.RTCIceCandidate(c);this._pc.addIceCandidate(b).catch(m=>{!b.address||b.address.endsWith(".local")?_("Ignoring unsupported ICE candidate."):this.destroy(u(m,"ERR_ADD_ICE_CANDIDATE"))})}send(c){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(c)}}addTransceiver(c,b){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(c,b),this._needsNegotiation()}catch(m){this.destroy(u(m,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:c,init:b}})}}addStream(c){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),c.getTracks().forEach(b=>{this.addTrack(b,c)})}}addTrack(c,b){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const m=this._senderMap.get(c)||new Map;let y=m.get(b);if(!y)y=this._pc.addTrack(c,b),m.set(b,y),this._senderMap.set(c,m),this._needsNegotiation();else throw y.removed?u(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):u(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(c,b,m){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const y=this._senderMap.get(c),C=y?y.get(m):null;if(!C)throw u(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");b&&this._senderMap.set(b,y),C.replaceTrack!=null?C.replaceTrack(b):this.destroy(u(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(c,b){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const m=this._senderMap.get(c),y=m?m.get(b):null;if(!y)throw u(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{y.removed=!0,this._pc.removeTrack(y)}catch(C){C.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(y):this.destroy(u(C,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(c){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),c.getTracks().forEach(b=>{this.removeTrack(b,c)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,l(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(c){this._destroy(c,()=>{})}_destroy(c,b){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",c&&(c.message||c)),l(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",c&&(c.message||c)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,c&&this.emit("error",c),this.emit("close"),b()}))}_setupData(c){if(!c.channel)return this.destroy(u(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=c.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=o),this.channelName=this._channel.label,this._channel.onmessage=m=>{this._onChannelMessage(m)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=m=>{const y=m.error instanceof Error?m.error:new Error(`Datachannel error: ${m.message} ${m.filename}:${m.lineno}:${m.colno}`);this.destroy(u(y,"ERR_DATA_CHANNEL"))};let b=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(b&&this._onChannelClose(),b=!0):b=!1},w)}_read(){}_write(c,b,m){if(this.destroyed)return m(u(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(c)}catch(y){return this.destroy(u(y,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>o?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=m):m(null)}else this._debug("write before connect"),this._chunk=c,this._cb=m}_onFinish(){if(this.destroyed)return;const c=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?c():this.once("connect",c)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(c=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(c.sdp=E(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const b=()=>{if(this.destroyed)return;const C=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:C.type,sdp:C.sdp})},m=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?b():this.once("_iceComplete",b))},y=C=>{this.destroy(u(C,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(c).then(m).catch(y)}).catch(c=>{this.destroy(u(c,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(c=>{!c.mid&&c.sender.track&&!c.requested&&(c.requested=!0,this.addTransceiver(c.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(c=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(c.sdp=E(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const b=()=>{if(this.destroyed)return;const C=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:C.type,sdp:C.sdp}),this.initiator||this._requestMissingTransceivers()},m=()=>{this.destroyed||(this.trickle||this._iceComplete?b():this.once("_iceComplete",b))},y=C=>{this.destroy(u(C,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(c).then(m).catch(y)}).catch(c=>{this.destroy(u(c,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(u(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const c=this._pc.iceConnectionState,b=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",c,b),this.emit("iceStateChange",c,b),(c==="connected"||c==="completed")&&(this._pcReady=!0,this._maybeReady()),c==="failed"&&this.destroy(u(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),c==="closed"&&this.destroy(u(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(c){const b=m=>(Object.prototype.toString.call(m.values)==="[object Array]"&&m.values.forEach(y=>{Object.assign(m,y)}),m);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(m=>{const y=[];m.forEach(C=>{y.push(b(C))}),c(null,y)},m=>c(m)):this._pc.getStats.length>0?this._pc.getStats(m=>{if(this.destroyed)return;const y=[];m.result().forEach(C=>{const I={};C.names().forEach(x=>{I[x]=C.stat(x)}),I.id=C.id,I.type=C.type,I.timestamp=C.timestamp,y.push(b(I))}),c(null,y)},m=>c(m)):c(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const c=()=>{this.destroyed||this.getStats((b,m)=>{if(this.destroyed)return;b&&(m=[]);const y={},C={},I={};let x=!1;m.forEach(A=>{(A.type==="remotecandidate"||A.type==="remote-candidate")&&(y[A.id]=A),(A.type==="localcandidate"||A.type==="local-candidate")&&(C[A.id]=A),(A.type==="candidatepair"||A.type==="candidate-pair")&&(I[A.id]=A)});const R=A=>{x=!0;let P=C[A.localCandidateId];P&&(P.ip||P.address)?(this.localAddress=P.ip||P.address,this.localPort=Number(P.port)):P&&P.ipAddress?(this.localAddress=P.ipAddress,this.localPort=Number(P.portNumber)):typeof A.googLocalAddress=="string"&&(P=A.googLocalAddress.split(":"),this.localAddress=P[0],this.localPort=Number(P[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let F=y[A.remoteCandidateId];F&&(F.ip||F.address)?(this.remoteAddress=F.ip||F.address,this.remotePort=Number(F.port)):F&&F.ipAddress?(this.remoteAddress=F.ipAddress,this.remotePort=Number(F.portNumber)):typeof A.googRemoteAddress=="string"&&(F=A.googRemoteAddress.split(":"),this.remoteAddress=F[0],this.remotePort=Number(F[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(m.forEach(A=>{A.type==="transport"&&A.selectedCandidatePairId&&R(I[A.selectedCandidatePairId]),(A.type==="googCandidatePair"&&A.googActiveConnection==="true"||(A.type==="candidatepair"||A.type==="candidate-pair")&&A.selected)&&R(A)}),!x&&(!Object.keys(I).length||Object.keys(C).length)){setTimeout(c,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(P){return this.destroy(u(P,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const A=this._cb;this._cb=null,A(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};c()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>o||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(c=>{this._pc.removeTrack(c),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(c){this.destroyed||(c.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:c.candidate.candidate,sdpMLineIndex:c.candidate.sdpMLineIndex,sdpMid:c.candidate.sdpMid}}):!c.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),c.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(c){if(this.destroyed)return;let b=c.data;b instanceof ArrayBuffer&&(b=f.from(b)),this.push(b)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const c=this._cb;this._cb=null,c(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(c){this.destroyed||c.streams.forEach(b=>{this._debug("on track"),this.emit("track",c.track,b),this._remoteTracks.push({track:c.track,stream:b}),!this._remoteStreams.some(m=>m.id===b.id)&&(this._remoteStreams.push(b),l(()=>{this._debug("on stream"),this.emit("stream",b)}))})}_debug(){const c=[].slice.call(arguments);c[0]="["+this._id+"] "+c[0],r.apply(null,c)}}return S.WEBRTC_SUPPORT=!!e(),S.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},S.channelConfig={},Ut=S,Ut}var qs=Us();const js=Xr(qs);function Ws(){const r=useRef(),e=()=>{r.current.clearCanvas()};return G.jsxs("div",{className:"absolute inset-0",children:[G.jsx(Ln,{ref:r,style:{border:"1px solid black",width:"100%",height:"100%"},strokeWidth:tool==="pen"?2:10,strokeColor:"#00FF00"}),G.jsxs("div",{className:"absolute top-2 left-2 p-2 bg-gray-800 rounded shadow",children:[G.jsx("button",{onClick:()=>setTool("pen"),className:`px-2 py-1 text-sm ${tool==="pen"?"bg-blue-500":"bg-gray-600"} rounded mr-2`,children:"펜"}),G.jsx("button",{onClick:()=>setTool("eraser"),className:`px-2 py-1 text-sm ${tool==="eraser"?"bg-blue-500":"bg-gray-600"} rounded mr-2`,children:"지우개"}),G.jsx("button",{onClick:e,className:"px-2 py-1 text-sm bg-red-600 rounded",children:"전체 지우기"})]})]})}function $s({socket:r}){const[e,t]=it(""),[n,l]=it([]),u=()=>{r.emit("chat-message",e),l([...n,{type:"sent",text:e}]),t("")};return r.on("chat-message",f=>{l(o=>[...o,{type:"received",text:f}])}),G.jsxs("div",{className:"w-1/3 bg-gray-800 text-white p-4",children:[G.jsx("h3",{className:"font-bold mb-2",children:"채팅"}),G.jsx("div",{className:"h-64 overflow-y-scroll bg-gray-700 p-2 rounded",children:n.map((f,o)=>G.jsx("div",{className:`mb-1 ${f.type==="sent"?"text-right":""}`,children:f.text},o))}),G.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),className:"w-full mt-2 p-2 rounded bg-gray-600"}),G.jsx("button",{onClick:u,className:"mt-2 w-full px-4 py-2 bg-blue-600 rounded",children:"전송"})]})}const Ce=nt("http://localhost:5000");function Vs(){const[r,e]=it(""),[t,n]=it(!1),l=ht(),u=ht(),f=ht();In(()=>{Ce.on("connect",()=>{e(Ce.id),console.log("내 소켓 ID:",Ce.id);const w=new URLSearchParams(window.location.search);w.get("room")?o(w.get("room")):(window.history.replaceState(null,"",`?room=${Ce.id}`),n(!0))}),Ce.on("signal",w=>{f.current.signal(w.signal)})},[]);const o=w=>{const E=new js({initiator:t,trickle:!1,stream:null});E.on("signal",_=>{Ce.emit("signal",{to:w,signal:_})}),E.on("stream",_=>{u.current&&(u.current.srcObject=_)}),f.current=E},p=async()=>{const w=await navigator.mediaDevices.getDisplayMedia({video:!0});l.current.srcObject=w,f.current&&f.current.addStream(w)};return G.jsxs("div",{className:"flex h-screen flex-col bg-gray-900 text-white",children:[G.jsxs("header",{className:"flex items-center justify-between p-4 bg-gray-800",children:[G.jsx("h1",{className:"text-xl font-bold",children:"화면 공유"}),G.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",children:"화면 공유 시작"})]}),G.jsxs("main",{className:"flex-grow flex",children:[G.jsxs("div",{className:"relative flex-1",children:[G.jsx("video",{ref:l,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}),G.jsx(Ws,{})]}),G.jsx("div",{className:"relative flex-1",children:G.jsx("video",{ref:u,autoPlay:!0,className:"w-full h-full object-cover"})}),G.jsx($s,{socket:Ce})]})]})}function Hs(){return G.jsx(un,{children:G.jsx(Si,{children:G.jsx(an,{path:"/",element:G.jsx(Vs,{})})})})}qn.createRoot(document.getElementById("root")).render(G.jsx(un,{children:G.jsx(Hs,{})}));
